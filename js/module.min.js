!function(){var i={831:function(){var t,e,i=window.navigator.userAgent,s=(i.indexOf("MSIE "),{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return s.Android()||s.BlackBerry()||s.iOS()||s.Opera()||s.Windows()}});function n(){return-1<(i=navigator.userAgent).indexOf("MSIE ")||-1<i.indexOf("Trident/")}if(n()&&document.querySelector("html").classList.add("_ie"),s.any()&&document.querySelector("html").classList.add("_touch"),t=function(t){!0===t?document.querySelector("html").classList.add("_webp"):document.querySelector("html").classList.add("_no-webp")},(e=new Image).onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",n())for(var o=document.querySelectorAll("._ibg"),a=0;a<o.length;a++)o[a].querySelector("img")&&null!=o[a].querySelector("img").getAttribute("src")&&(o[a].style.backgroundImage="url("+o[a].querySelector("img").getAttribute("src")+")");window.addEventListener("load",function(){document.querySelector(".wrapper")&&setTimeout(function(){document.querySelector(".wrapper").classList.add("_loaded")},0)})},839:function(){function u(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){var i;if(t)return"string"==typeof t?s(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var t,e,i;t="json/data.json",e=function(t){function e(){h(i.cards)}var i=JSON.parse(t),s=4,n=0,o=!1,a=document.querySelector(".portfolio__btn"),r=document.querySelector(".portfolio__items"),l=function(t){var e,i,s=function(t,e){var i,s,n,o,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return s=!(i=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,n=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw n}}};if(Array.isArray(t)||(a=c(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;r.insertAdjacentHTML("beforeend",'\n\t\t<div data-id="'.concat((i=n).id,'" class="portfolio__item item">\n\t\t\t<div class="item__picture img">\n\t\t\t\t<a class="item__link" data-fancybox href="').concat(i.imageLink,'">\n\t\t\t\t\t<img class="item__img" src="').concat(i.image,'" alt="">\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<span class="item__title">').concat(i.id," ").concat(i.title,"</span>\n\t\t</div>\n\t\t"))}}catch(t){s.e(t)}finally{s.f()}},h=function(t){l(u(t).splice(n,s)),(n+=s)>=t.length&&(a.style="display: none;")};window.addEventListener("load",function(){var i,s;i=document.querySelector("#i"),s=e,new IntersectionObserver(function(t,e){t.forEach(function(t){0<t.intersectionRatio&&(s(i),e.disconnect())})}).observe(i)}),window.addEventListener("scroll",function(){var t,e;o||(t=(t=r).getBoundingClientRect(),e=t.top,t=t.bottom,e<window.innerHeight&&0<=t&&(h(i.cards),o=!0))}),a.addEventListener("click",e)},(i=new XMLHttpRequest).overrideMimeType("application/json"),i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&"200"==i.status&&e(i.responseText)},i.send(null)},969:function(){var i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}};document.addEventListener("click",function(t){var e=t.target;767<window.innerWidth&&!i.any()&&e.closest(".menu__btn")&&(o.classList.toggle("_active"),s.classList.toggle("_active"),n.classList.toggle("_active"));e.closest(".sidebar")||e.closest(".menu__btn")||(o.classList.remove("_active"),n.classList.remove("_active"),s.classList.remove("_active"));e.classList.contains("menu__item")&&(a(),t.preventDefault())});var s=document.querySelector(".wrapper"),n=document.querySelector(".sidebar"),o=document.querySelector(".menu"),t=document.querySelectorAll("li");function a(){t.forEach(function(t){return t.classList.remove("_active")}),this.classList.add("_active")}t.forEach(function(t){return t.addEventListener("click",a)});var e=!1,r=document.getElementById("switch");document.getElementById("light");r.addEventListener("click",function(){e=!e,light.style.opacity=e?"1":"0"})}},s={};function le(t){var e=s[t];return void 0!==e||(e=s[t]={exports:{}},i[t](e,e.exports,le)),e.exports}!function(){"use strict";le(831),le(969);var n=!0;function D(t){if(document.querySelector("body").classList.contains("_lock"))R(t);else{var e=document.querySelector("body");if(n){for(var i=document.querySelectorAll("._lp"),s=0;s<i.length;s++)i[s].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";e.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",e.classList.add("_lock"),n=!1,setTimeout(function(){n=!0},t)}}}function R(t){var e,i=document.querySelector("body");n&&(e=document.querySelectorAll("._lp"),setTimeout(function(){for(var t=0;t<e.length;t++)e[t].style.paddingRight="0px";i.style.paddingRight="0px",i.classList.remove("_lock")},t),n=!1,setTimeout(function(){n=!0},t))}for(var z=document.querySelectorAll("._open"),V=document.querySelectorAll("._close"),e=document.querySelector("dialog"),j=0;j<z.length;j++)z[j].addEventListener("click",function(t){e.showModal(),D()});for(var N=0;N<V.length;N++)V[N].addEventListener("click",function(t){e.close(),R()});for(var q=0;q<e.length;q++)e[q].addEventListener("click",function(t){t.target.closest(".modal__content")||(e.close(t.target.closest("dialog")),R())});le(839);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function h(t,e,i){e&&W(t.prototype,e),i&&W(t,i),Object.defineProperty(t,"prototype",{writable:!1})}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if(null==t)return{};var i,s=function(t,e){if(null==t)return{};for(var i,s={},n=Object.keys(t),o=0;o<n.length;o++)i=n[o],0<=e.indexOf(i)||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),o=0;o<n.length;o++)i=n[o],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i]);return s}function Y(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");e=t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(i){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(i);return Y(this,s?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function X(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var s=X(t,e);if(s)return(s=Object.getOwnPropertyDescriptor(s,e)).get?s.get.call(arguments.length<3?t:i):s.value}).apply(this,arguments)}function G(t,e,i,s){return(G="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,s){var n,t=X(t,e);if(t){if((n=Object.getOwnPropertyDescriptor(t,e)).set)return n.set.call(s,i),!0;if(!n.writable)return!1}if(n=Object.getOwnPropertyDescriptor(s,e)){if(!n.writable)return!1;n.value=i,Object.defineProperty(s,e,n)}else t=i,(n=e)in(i=s)?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t;return!0})(t,e,i,s)}function p(t,e,i,s,n){if(!G(t,e,i,s||t)&&n)throw new Error("failed to set property")}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,o=[],a=!0,r=!1;try{for(i=i.call(t);!(a=(s=i.next()).done)&&(o.push(s.value),!e||o.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return o}}(t,e)||Z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){var i;if(t)return"string"==typeof t?K(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?K(t,e):void 0}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var m=function(){function e(t){a(this,e),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},t)}return h(e,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),e}();function l(t){return"string"==typeof t||t instanceof String}var v="NONE",y="LEFT",b="FORCE_LEFT",k="RIGHT",x="FORCE_RIGHT";function J(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function w(t){return Array.isArray(t)?t:[t,new m]}var Q=function(){function n(t,e,i,s){for(a(this,n),this.value=t,this.cursorPos=e,this.oldValue=i,this.oldSelection=s;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return h(n,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?v:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?y:k}}]),n}(),C=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length?arguments[2]:void 0;a(this,s),this.value=t,this.from=e,this.stop=i}return h(s,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}},{key:"unshift",value:function(t){return!this.value.length||null!=t&&this.from>=t?"":(t=this.value[0],this.value=this.value.slice(1),t)}},{key:"shift",value:function(){var t;return this.value.length?(t=this.value[this.value.length-1],this.value=this.value.slice(0,-1),t):""}}]),s}();function E(t){return new E.InputMask(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}var s=function(){function i(t){a(this,i),this._value="",this._update(Object.assign({},i.DEFAULTS,t)),this.isInitialized=!0}return h(i,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(t){this.value=this.doFormat(t)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return this.isComplete}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length;return new C(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return(t=l(t)?new C(String(t)):t).appendTo(this)}},{key:"_appendCharRaw",value:function(t){return t?(this._value+=t,new m({inserted:t,rawInserted:t})):new m}},{key:"_appendChar",value:function(t){var e,i,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,o=this.state,a=g(w(this.doPrepare(t,s)),2);return t=a[0],(a=(a=a[1]).aggregate(this._appendCharRaw(t,s))).inserted&&((t=!1!==this.doValidate(s))&&null!=n&&(s=this.state,!0===this.overwrite&&(e=n.state,n.unshift(this.value.length)),(t=(i=this.appendTail(n)).rawInserted===n.toString())&&i.inserted||"shift"!==this.overwrite||(this.state=s,e=n.state,n.shift(),t=(i=this.appendTail(n)).rawInserted===n.toString()),t&&i.inserted&&(this.state=s)),t||(a=new m,this.state=o,n&&e&&(n.state=e))),a}},{key:"_appendPlaceholder",value:function(){return new m}},{key:"_appendEager",value:function(){return new m}},{key:"append",value:function(t,e,i){if(!l(t))throw new Error("value should be string");var s=new m,n=l(i)?new C(String(i)):i;null!=e&&e.tail&&(e._beforeTailState=this.state);for(var o=0;o<t.length;++o)s.aggregate(this._appendChar(t[o],e,n));return null!=n&&(s.tailShift+=this.appendTail(n).tailShift),this.eager&&null!=e&&e.input&&t&&s.aggregate(this._appendEager()),s}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new m}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.rawInputValue,i=this.value,t=t();return this.rawInputValue=e,this.value&&this.value!==i&&0===i.indexOf(this.value)&&this.append(i.slice(this.value.length),{},""),delete this._refreshing,t}},{key:"runIsolated",value:function(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;var e=this.state,t=t(this);return this.state=e,delete this._isolated,t}},{key:"doPrepare",value:function(t){return this.prepare?this.prepare(t,this,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(t){return this.format?this.format(t,this):t}},{key:"doParse",value:function(t){return this.parse?this.parse(t,this):t}},{key:"splice",value:function(t,e,i,s){var n,o,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{input:!0},r=t+e,l=this.extractTail(r),r=(this.eager&&(s=function(t){switch(t){case y:return b;case k:return x;default:return t}}(s),n=this.extractInput(0,r,{raw:!0})),this.nearestInputPos(t,1<e&&0!==t&&!this.eager?v:s)),h=new m({tailShift:r-t}).aggregate(this.remove(r));if(this.eager&&s!==v&&n===this.rawInputValue)if(s===b)for(;n===this.rawInputValue&&(o=this.value.length);)h.aggregate(new m({tailShift:-1})).aggregate(this.remove(o-1));else s===x&&l.unshift();return h.aggregate(this.append(i,a,l))}},{key:"maskEquals",value:function(t){return this.mask===t}},{key:"typedValueEquals",value:function(t){var e=this.typedValue;return t===e||i.EMPTY_VALUES.includes(t)&&i.EMPTY_VALUES.includes(e)||this.doFormat(t)===this.doFormat(this.typedValue)}}]),i}();function tt(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?E.MaskedRegExp:l(t)?E.MaskedPattern:t instanceof Date||t===Date?E.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?E.MaskedNumber:Array.isArray(t)||t===Array?E.MaskedDynamic:E.Masked&&t.prototype instanceof E.Masked?t:t instanceof E.Masked?t.constructor:t instanceof Function?E.MaskedFunction:(console.warn("Mask not found for mask",t),E.Masked)}function S(t){if(E.Masked&&t instanceof E.Masked)return t;var e=(t=Object.assign({},t)).mask;if(E.Masked&&e instanceof E.Masked)return e;e=tt(e);if(e)return new e(t);throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.")}s.DEFAULTS={format:function(t){return t},parse:function(t){return t}},s.EMPTY_VALUES=[void 0,null,""],E.Masked=s,E.createMask=S;var et=["mask"],it={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},st=function(){function i(t){a(this,i);var e=t.mask,t=o(t,et);this.masked=S({mask:e}),Object.assign(this,t)}return h(i,[{key:"reset",value:function(){this.isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&1<=e?(this.isFilled=!1,this.masked.remove(t,e)):new m}},{key:"value",get:function(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.isFilled?new m:(e=this.masked.state,(t=this.masked._appendChar(t,i)).inserted&&!1===this.doValidate(i)&&(t.inserted=t.rawInserted="",this.masked.state=e),t.inserted||this.isOptional||this.lazy||i.input||(t.inserted=this.placeholderChar),t.skip=!t.inserted&&!this.isOptional,this.isFilled=Boolean(t.inserted),t)}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new m;return this.isFilled||this.isOptional||(this.isFilled=!0,t.inserted=this.placeholderChar),t}},{key:"_appendEager",value:function(){return new m}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.masked.extractInput(t,e,2<arguments.length?arguments[2]:void 0)}},{key:"nearestInputPos",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v,i=this.value.length,s=Math.min(Math.max(t,0),i);switch(e){case y:case b:return this.isComplete?s:0;case k:case x:return this.isComplete?s:i;default:return s}}},{key:"doValidate",value:function(){var t;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(t=this.parent).doValidate.apply(t,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,isFilled:this.isFilled}},set:function(t){this.masked.state=t.masked,this.isFilled=t.isFilled}}]),i}(),nt=function(){function e(t){a(this,e),Object.assign(this,t),this._value="",this.isFixed=!0}return h(e,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new m}},{key:"nearestInputPos",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v,i=this._value.length;switch(e){case y:case b:return 0;default:return i}}},{key:"extractInput",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._value.length;return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return Boolean(this._value)}},{key:"_appendChar",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new m;return this._value||((t=this.char===t&&(this.isUnmasking||e.input||e.raw)&&!(e.raw&&this.eager||e.tail))&&(i.rawInserted=this.char),this._value=i.inserted=this.char,this._isRawInput=t&&(e.raw||e.input)),i}},{key:"_appendEager",value:function(){return this._appendChar(this.char,{tail:!0})}},{key:"_appendPlaceholder",value:function(){var t=new m;return this._value||(this._value=t.inserted=this.char),t}},{key:"extractTail",value:function(){return 1<arguments.length&&void 0!==arguments[1]||this.value.length,new C("")}},{key:"appendTail",value:function(t){return(t=l(t)?new C(String(t)):t).appendTo(this)}},{key:"append",value:function(t,e,i){t=this._appendChar(t[0],e);return null!=i&&(t.tailShift+=this.appendTail(i).tailShift),t}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),e}(),ot=["chunks"],at=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a(this,r),this.chunks=t,this.from=e}return h(r,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(t){if(String(t)){l(t)&&(t=new C(String(t)));var e,i=this.chunks[this.chunks.length-1],s=i&&(i.stop===t.stop||null==t.stop)&&t.from===i.from+i.toString().length;if(t instanceof C)s?i.extend(t.toString()):this.chunks.push(t);else if(t instanceof r){if(null==t.stop)for(;t.chunks.length&&null==t.chunks[0].stop;)(e=t.chunks.shift()).from+=t.from,this.extend(e);t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}}},{key:"appendTo",value:function(t){if(!(t instanceof E.MaskedPattern))return new C(this.toString()).appendTo(t);for(var e=new m,i=0;i<this.chunks.length&&!e.skip;++i){var s=this.chunks[i],n=t._mapPosToBlock(t.value.length),o=s.stop,a=void 0;null!=o&&(!n||n.index<=o)&&((s instanceof r||0<=t._stops.indexOf(o))&&e.aggregate(t._appendPlaceholder(o)),a=s instanceof r&&t._blocks[o]),a?((n=a.appendTail(s)).skip=!1,e.aggregate(n),t._value+=n.inserted,(o=s.toString().slice(n.rawInserted.length))&&e.aggregate(t.append(o,{tail:!0}))):e.aggregate(t.append(s.toString(),{tail:!0}))}return e}},{key:"state",get:function(){return{chunks:this.chunks.map(function(t){return t.state}),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(t){var e=t.chunks,t=o(t,ot);Object.assign(this,t),this.chunks=e.map(function(t){var e=new("chunks"in t?r:C);return e.state=t,e})}},{key:"unshift",value:function(t){if(this.chunks.length&&!(null!=t&&this.from>=t))for(var e=null!=t?t-this.from:t,i=0;i<this.chunks.length;){var s=this.chunks[i],n=s.unshift(e);if(s.toString()){if(!n)break;++i}else this.chunks.splice(i,1);if(n)return n}return""}},{key:"shift",value:function(){if(this.chunks.length)for(var t=this.chunks.length-1;0<=t;){var e=this.chunks[t],i=e.shift();if(e.toString()){if(!i)break;--t}else this.chunks.splice(t,1);if(i)return i}return""}}]),r}(),rt=function(){function i(t,e){a(this,i),this.masked=t,this._log=[];t=t._mapPosToBlock(e)||(e<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0}),e=t.offset,t=t.index;this.offset=e,this.index=t,this.ok=!1}return h(i,[{key:"block",get:function(){return this.masked._blocks[this.index]}},{key:"pos",get:function(){return this.masked._blockStartPos(this.index)+this.offset}},{key:"state",get:function(){return{index:this.index,offset:this.offset,ok:this.ok}},set:function(t){Object.assign(this,t)}},{key:"pushState",value:function(){this._log.push(this.state)}},{key:"popState",value:function(){var t=this._log.pop();return this.state=t}},{key:"bindBlock",value:function(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}},{key:"_pushLeft",value:function(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(e=this.block)?void 0:e.value.length)||0){var e;if(t())return this.ok=!0}return this.ok=!1}},{key:"_pushRight",value:function(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}},{key:"pushLeftBeforeFilled",value:function(){var t=this;return this._pushLeft(function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,b),0!==t.offset||void 0})}},{key:"pushLeftBeforeInput",value:function(){var t=this;return this._pushLeft(function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,y),!0})}},{key:"pushLeftBeforeRequired",value:function(){var t=this;return this._pushLeft(function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,y),!0})}},{key:"pushRightBeforeFilled",value:function(){var t=this;return this._pushRight(function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,x),t.offset!==t.block.value.length||void 0})}},{key:"pushRightBeforeInput",value:function(){var t=this;return this._pushRight(function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,v),!0})}},{key:"pushRightBeforeRequired",value:function(){var t=this;return this._pushRight(function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,v),!0})}}]),i}(),t=function(){u(i,s);var t=d(i);function i(){return a(this,i),t.apply(this,arguments)}return h(i,[{key:"_update",value:function(e){e.mask&&(e.validate=function(t){return 0<=t.search(e.mask)}),f(c(i.prototype),"_update",this).call(this,e)}}]),i}(),lt=(E.MaskedRegExp=t,["_blocks"]),i=function(){u(l,s);var e=d(l);function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a(this,l),t.definitions=Object.assign({},it,t.definitions),e.call(this,Object.assign({},l.DEFAULTS,t))}return h(l,[{key:"_update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),f(c(l.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var s=this,t=this.definitions,n=(this._blocks=[],this._stops=[],this._maskedBlocks={},this.mask);if(n&&t)for(var e=!1,i=!1,o=0;o<n.length;++o){if(this.blocks)if("continue"===function(){var t,e=n.slice(o),i=Object.keys(s.blocks).filter(function(t){return 0===e.indexOf(t)}),i=(i.sort(function(t,e){return e.length-t.length}),i[0]);if(i)return(t=S(Object.assign({parent:s,lazy:s.lazy,eager:s.eager,placeholderChar:s.placeholderChar,overwrite:s.overwrite},s.blocks[i])))&&(s._blocks.push(t),s._maskedBlocks[i]||(s._maskedBlocks[i]=[]),s._maskedBlocks[i].push(s._blocks.length-1)),o+=i.length-1,"continue"}())continue;var a=n[o],r=a in t;if(a===l.STOP_CHAR)this._stops.push(this._blocks.length);else if("{"===a||"}"===a)e=!e;else if("["===a||"]"===a)i=!i;else{if(a===l.ESCAPE_CHAR){if(!(a=n[++o]))break;r=!1}r=r?new st({parent:this,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,mask:t[a],isOptional:i}):new nt({char:a,eager:this.eager,isUnmasking:e});this._blocks.push(r)}}}},{key:"state",get:function(){return Object.assign({},f(c(l.prototype),"state",this),{_blocks:this._blocks.map(function(t){return t.state})})},set:function(t){var i=t._blocks,t=o(t,lt);this._blocks.forEach(function(t,e){return t.state=i[e]}),p(c(l.prototype),"state",t,this,!0)}},{key:"reset",value:function(){f(c(l.prototype),"reset",this).call(this),this._blocks.forEach(function(t){return t.reset()})}},{key:"isComplete",get:function(){return this._blocks.every(function(t){return t.isComplete})}},{key:"isFilled",get:function(){return this._blocks.every(function(t){return t.isFilled})}},{key:"isFixed",get:function(){return this._blocks.every(function(t){return t.isFixed})}},{key:"isOptional",get:function(){return this._blocks.every(function(t){return t.isOptional})}},{key:"doCommit",value:function(){this._blocks.forEach(function(t){return t.doCommit()}),f(c(l.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce(function(t,e){return t+e.unmaskedValue},"")},set:function(t){p(c(l.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce(function(t,e){return t+e.value},"")},set:function(t){p(c(l.prototype),"value",t,this,!0)}},{key:"appendTail",value:function(t){return f(c(l.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendEager",value:function(){var t=new m,e=null==(e=this._mapPosToBlock(this.value.length))?void 0:e.index;if(null!=e){this._blocks[e].isFilled&&++e;for(var i=e;i<this._blocks.length;++i){var s=this._blocks[i]._appendEager();if(!s.inserted)break;t.aggregate(s)}}return t}},{key:"_appendCharRaw",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this._mapPosToBlock(this.value.length),s=new m;if(i)for(var n=i.index;;++n){var o=this._blocks[n];if(!o)break;var o=o._appendChar(t,Object.assign({},e,{_beforeTailState:null==(o=e._beforeTailState)||null==(o=o._blocks)?void 0:o[n]})),a=o.skip;if(s.aggregate(o),a||o.rawInserted)break}return s}},{key:"extractTail",value:function(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,o=new at;return t!==e&&this._forEachBlocksInRange(t,e,function(t,e,i,s){t=t.extractTail(i,s);t.stop=n._findStopBefore(e),t.from=n._blockStartPos(e),t instanceof at&&(t.blockIndex=e),o.extend(t)}),o}},{key:"extractInput",value:function(){var n,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t===e?"":(n="",this._forEachBlocksInRange(t,e,function(t,e,i,s){n+=t.extractInput(i,s,o)}),n)}},{key:"_findStopBefore",value:function(t){for(var e,i=0;i<this._stops.length;++i){var s=this._stops[i];if(!(s<=t))break;e=s}return e}},{key:"_appendPlaceholder",value:function(i){var t,e,s=this,n=new m;return this.lazy&&null==i||(t=this._mapPosToBlock(this.value.length))&&(t=t.index,e=null!=i?i:this._blocks.length,this._blocks.slice(t,e).forEach(function(t){var e;t.lazy&&null==i||(e=null!=t._blocks?[t._blocks.length]:[],t=t._appendPlaceholder.apply(t,e),s._value+=t.inserted,n.aggregate(t))})),n}},{key:"_mapPosToBlock",value:function(t){for(var e="",i=0;i<this._blocks.length;++i){var s=this._blocks[i],n=e.length;if(t<=(e+=s.value).length)return{index:i,offset:t-n}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce(function(t,e){return t+e.value.length},0)}},{key:"_forEachBlocksInRange",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,i=2<arguments.length?arguments[2]:void 0,t=this._mapPosToBlock(t);if(t){var s=this._mapPosToBlock(e),e=s&&t.index===s.index,n=t.offset,o=s&&e?s.offset:this._blocks[t.index].value.length;if(i(this._blocks[t.index],t.index,n,o),s&&!e){for(var a=t.index+1;a<s.index;++a)i(this._blocks[a],a,0,this._blocks[a].value.length);i(this._blocks[s.index],s.index,0,s.offset)}}}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,n=f(c(l.prototype),"remove",this).call(this,t,e);return this._forEachBlocksInRange(t,e,function(t,e,i,s){n.aggregate(t.remove(i,s))}),n}},{key:"nearestInputPos",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v;if(!this._blocks.length)return 0;var i=new rt(this,t);if(e===v)return i.pushRightBeforeInput()||(i.popState(),i.pushLeftBeforeInput())?i.pos:this.value.length;if(e!==y&&e!==b)return e===k||e===x?(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.pushRightBeforeFilled()?i.pos:e===x?this.value.length:(i.popState(),i.ok||(i.popState(),i.ok)?i.pos:this.nearestInputPos(t,y))):t;if(e===y){if(i.pushRightBeforeFilled(),i.ok&&i.pos===t)return t;i.popState()}if(i.pushLeftBeforeInput(),i.pushLeftBeforeRequired(),i.pushLeftBeforeFilled(),e===y){if(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.ok&&i.pos<=t)return i.pos;if(i.popState(),i.ok&&i.pos<=t)return i.pos;i.popState()}return i.ok||e!==b&&(i.popState(),i.ok||(i.popState(),i.ok))?i.pos:0}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,t=this._maskedBlocks[t];return t?t.map(function(t){return e._blocks[t]}):[]}}]),l}(),ht=(i.DEFAULTS={lazy:!0,placeholderChar:"_"},i.STOP_CHAR="`",i.ESCAPE_CHAR="\\",i.InputDefinition=st,i.FixedDefinition=nt,E.MaskedPattern=i,function(){u(l,i);var t=d(l);function l(){return a(this,l),t.apply(this,arguments)}return h(l,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0,maxLength:this.maxLength||0},t);for(var e=String(t.to).length,i=(null!=t.maxLength&&(e=Math.max(e,t.maxLength)),t.maxLength=e,String(t.from).padStart(e,"0")),s=String(t.to).padStart(e,"0"),n=0;n<s.length&&s[n]===i[n];)++n;t.mask=s.slice(0,n).replace(/0/g,"\\0")+"0".repeat(e-n),f(c(l.prototype),"_update",this).call(this,t)}},{key:"isComplete",get:function(){return f(c(l.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(t){var e="",i="",t=g(t.match(/^(\D*)(\d*)(\D*)/)||[],3),s=t[1],t=t[2];return t&&(e="0".repeat(s.length)+t,i="9".repeat(s.length)+t),[e=e.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var e,i,s,n,o,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=g(w(f(c(l.prototype),"doPrepare",this).call(this,t.replace(/\D/g,""),a)),2);return t=r[0],r=r[1],this.autofix&&t?(e=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),(s=this.value+t).length>this.maxLength?"":(n=(o=g(this.boundaries(s),2))[0],o=o[1],Number(o)<this.from?e[s.length-1]:Number(n)>this.to?"pad"===this.autofix&&s.length<this.maxLength?["",r.aggregate(this.append(e[s.length-1]+t,a))]:i[s.length-1]:t)):t}},{key:"doValidate",value:function(){var t=this.value;if(-1===t.search(/[^0]/)&&t.length<=this._matchFrom)return!0;for(var t=g(this.boundaries(t),2),e=t[0],t=t[1],i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return this.from<=Number(t)&&Number(e)<=this.to&&(t=f(c(l.prototype),"doValidate",this)).call.apply(t,[this].concat(s))}}]),l}()),t=(E.MaskedRange=ht,function(){u(o,i);var e=d(o);function o(t){return a(this,o),e.call(this,Object.assign({},o.DEFAULTS,t))}return h(o,[{key:"_update",value:function(e){e.mask===Date&&delete e.mask,e.pattern&&(e.mask=e.pattern);var t=e.blocks;e.blocks=Object.assign({},o.GET_DEFAULT_BLOCKS()),e.min&&(e.blocks.Y.from=e.min.getFullYear()),e.max&&(e.blocks.Y.to=e.max.getFullYear()),e.min&&e.max&&e.blocks.Y.from===e.blocks.Y.to&&(e.blocks.m.from=e.min.getMonth()+1,e.blocks.m.to=e.max.getMonth()+1,e.blocks.m.from===e.blocks.m.to&&(e.blocks.d.from=e.min.getDate(),e.blocks.d.to=e.max.getDate())),Object.assign(e.blocks,this.blocks,t),Object.keys(e.blocks).forEach(function(t){t=e.blocks[t];!("autofix"in t)&&"autofix"in e&&(t.autofix=e.autofix)}),f(c(o.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function(){for(var t,e=this.date,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=f(c(o.prototype),"doValidate",this)).call.apply(t,[this].concat(s))&&(!this.isComplete||this.isDateExist(this.value)&&null!=e&&(null==this.min||this.min<=e)&&(null==this.max||e<=this.max))}},{key:"isDateExist",value:function(t){return 0<=this.format(this.parse(t,this),this).indexOf(t)}},{key:"date",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"typedValue",get:function(){return this.isComplete?f(c(o.prototype),"typedValue",this):null},set:function(t){p(c(o.prototype),"typedValue",t,this,!0)}},{key:"maskEquals",value:function(t){return t===Date||f(c(o.prototype),"maskEquals",this).call(this,t)}}]),o}()),ut=(t.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return t?[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join("."):""},parse:function(t){var t=g(t.split("."),3),e=t[0],i=t[1],t=t[2];return new Date(t,i-1,e)}},t.GET_DEFAULT_BLOCKS=function(){return{d:{mask:ht,from:1,to:31,maxLength:2},m:{mask:ht,from:1,to:12,maxLength:2},Y:{mask:ht,from:1900,to:9999}}},E.MaskedDate=t,function(){function t(){a(this,t)}return h(t,[{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(t){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(t){}return null!=t?t:this.value.length}},{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(t){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}}]),t}()),ct=(E.MaskElement=ut,function(){u(s,ut);var i=d(s);function s(t){var e;return a(this,s),(e=i.call(this)).input=t,e._handlers={},e}return h(s,[{key:"rootElement",get:function(){var t,e;return null!=(t=null==(t=(e=this.input).getRootNode)?void 0:t.call(e))?t:document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}},{key:"bindEvents",value:function(e){var i=this;Object.keys(e).forEach(function(t){return i._toggleEventHandler(s.EVENTS_MAP[t],e[t])})}},{key:"unbindEvents",value:function(){var e=this;Object.keys(this._handlers).forEach(function(t){return e._toggleEventHandler(t)})}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}}]),s}()),dt=(ct.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},E.HTMLMaskElement=ct,function(){u(e,ct);var t=d(e);function e(){return a(this,e),t.apply(this,arguments)}return h(e,[{key:"_unsafeSelectionStart",get:function(){var t=this.rootElement,t=t.getSelection&&t.getSelection(),e=t&&t.anchorOffset,t=t&&t.focusOffset;return null==t||null==e||e<t?e:t}},{key:"_unsafeSelectionEnd",get:function(){var t=this.rootElement,t=t.getSelection&&t.getSelection(),e=t&&t.anchorOffset,t=t&&t.focusOffset;return null==t||null==e||t<e?e:t}},{key:"_unsafeSelect",value:function(t,e){var i;this.rootElement.createRange&&((i=this.rootElement.createRange()).setStart(this.input.firstChild||this.input,t),i.setEnd(this.input.lastChild||this.input,e),(e=(t=this.rootElement).getSelection&&t.getSelection())&&(e.removeAllRanges(),e.addRange(i)))}},{key:"value",get:function(){return this.input.textContent},set:function(t){this.input.textContent=t}}]),e}()),ft=(E.HTMLContenteditableMaskElement=dt,["mask"]),t=function(){function i(t,e){a(this,i),this.el=t instanceof ut?t:new(t.isContentEditable&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName?dt:ct)(t),this.masked=S(e),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return h(i,[{key:"mask",get:function(){return this.masked.mask},set:function(t){var e;this.maskEquals(t)||(t instanceof E.Masked||this.masked.constructor!==tt(t)?((e=S({mask:t})).unmaskedValue=this.masked.unmaskedValue,this.masked=e):this.masked.updateOptions({mask:t}))}},{key:"maskEquals",value:function(t){var e;return null==t||(null==(e=this.masked)?void 0:e.maskEquals(t))}},{key:"value",get:function(){return this._value},set:function(t){this.value!==t&&(this.masked.value=t,this.updateControl(),this.alignCursor())}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.unmaskedValue!==t&&(this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor())}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValueEquals(t)||(this.masked.typedValue=t,this.updateControl(),this.alignCursor())}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t=this._listeners[t];t&&t.forEach(function(t){return t.apply(void 0,i)})}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el&&this.el.isActive&&(this.el.select(t,t),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,i=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),i&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,t=o(t,ft),i=!this.maskEquals(e),s=!function t(e,i){if(i===e)return 1;var s=Array.isArray(i),n=Array.isArray(e);if(s&&n){if(i.length!=e.length)return;for(a=0;a<i.length;a++)if(!t(i[a],e[a]))return;return 1}if(s==n){if(i&&e&&"object"===H(i)&&"object"===H(e)){if(s=i instanceof Date,n=e instanceof Date,s&&n)return i.getTime()==e.getTime();if(s!=n)return;if(s=i instanceof RegExp,n=e instanceof RegExp,s&&n)return i.toString()==e.toString();if(s!=n)return;for(var o=Object.keys(i),a=0;a<o.length;a++)if(!Object.prototype.hasOwnProperty.call(e,o[a]))return;for(a=0;a<o.length;a++)if(!t(e[o[a]],i[o[a]]))return;return 1}return i&&e&&"function"==typeof i&&"function"==typeof e&&i.toString()===e.toString()}}(this.masked,t);i&&(this.mask=e),s&&this.masked.updateOptions(t),(i||s)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout(function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())},10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,y))}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){return this._listeners[t]&&(e?0<=(e=this._listeners[t].indexOf(e))&&this._listeners[t].splice(e,1):delete this._listeners[t]),this}},{key:"_onInput",value:function(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();var t=new Q(this.el.value,this.cursorPos,this.value,this._selection),e=this.masked.rawInputValue,i=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,e=e===this.masked.rawInputValue?t.removeDirection:v,t=this.masked.nearestInputPos(t.startChangePos+i,e);e!==v&&(t=this.masked.nearestInputPos(t,v)),this.updateControl(),this.updateCursor(t),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.alignCursorFriendly()}},{key:"_onClick",value:function(t){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),i}(),t=(E.InputMask=t,function(){u(o,i);var t=d(o);function o(){return a(this,o),t.apply(this,arguments)}return h(o,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),f(c(o.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return this.enum.some(function(t){return 0<=t.indexOf(e.unmaskedValue)})&&(t=f(c(o.prototype),"doValidate",this)).call.apply(t,[this].concat(s))}}]),o}()),t=(E.MaskedEnum=t,function(){u(r,s);var e=d(r);function r(t){return a(this,r),e.call(this,Object.assign({},r.DEFAULTS,t))}return h(r,[{key:"_update",value:function(t){f(c(r.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+J(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(J).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(J(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){t=t.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}},{key:"doPrepare",value:function(t){t=t.replace(this._mapToRadixRegExp,this.radix);for(var e=this._removeThousandsSeparators(t),i=arguments.length,s=new Array(1<i?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];var o=g(w((o=f(c(r.prototype),"doPrepare",this)).call.apply(o,[this,e].concat(s))),2),a=o[0],o=o[1];return t&&!e&&(o.skip=!0),[a,o]}},{key:"_separatorsCount",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=0,s=0;s<t;++s)this._value.indexOf(this.thousandsSeparator,s)===s&&(++i,e&&(t+=this.thousandsSeparator.length));return i}},{key:"_separatorsCountFromSlice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,i=2<arguments.length?arguments[2]:void 0,s=g(this._adjustRangeWithSeparators(t,e),2),t=s[0],e=s[1];return this._removeThousandsSeparators(f(c(r.prototype),"extractInput",this).call(this,t,e,i))}},{key:"_appendCharRaw",value:function(t){var e,i,s,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.thousandsSeparator?(e=(n.tail&&n._beforeTailState?n._beforeTailState:this)._value,e=this._separatorsCountFromSlice(e),this._value=this._removeThousandsSeparators(this.value),i=f(c(r.prototype),"_appendCharRaw",this).call(this,t,n),this._value=this._insertThousandsSeparators(this._value),s=(n.tail&&n._beforeTailState?n._beforeTailState:this)._value,s=this._separatorsCountFromSlice(s),i.tailShift+=(s-e)*this.thousandsSeparator.length,i.skip=!i.rawInserted&&t===this.thousandsSeparator,i):f(c(r.prototype),"_appendCharRaw",this).call(this,t,n)}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=t-this.thousandsSeparator.length+1,e=this.value.indexOf(this.thousandsSeparator,e);if(e<=t)return e}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var i=this._findSeparatorAround(t),i=(0<=i&&(t=i),this._findSeparatorAround(e));return[t,e=0<=i?i+this.thousandsSeparator.length:e]}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.value.length,i=g(this._adjustRangeWithSeparators(t,e),2),t=i[0],e=i[1],i=this.value.slice(0,t),t=this.value.slice(e),e=this._separatorsCount(i.length),t=(this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+t)),this._separatorsCountFromSlice(i));return new m({tailShift:(t-e)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(this.thousandsSeparator)switch(e){case v:case y:case b:var i=this._findSeparatorAround(t-1);if(0<=i){var s=i+this.thousandsSeparator.length;if(t<s||this.value.length<=s||e===b)return i}break;case k:case x:s=this._findSeparatorAround(t);if(0<=s)return s+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var e,i=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));return i&&(e=this.number,i=i&&!isNaN(e)&&(null==this.min||0<=this.min||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)),i&&f(c(r.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){var t,e;this.value&&(t=e=this.number,null!=this.min&&(t=Math.max(t,this.min)),(t=null!=this.max?Math.min(t,this.max):t)!==e&&(this.unmaskedValue=String(t)),e=this.value,this.normalizeZeros&&(e=this._normalizeZeros(e)),this.padFractionalZeros&&0<this.scale&&(e=this._padFractionalZeros(e)),this._value=e),f(c(r.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,function(t,e,i,s){return e+s}),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),1<e.length&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){var e;return t&&((e=t.split(this.radix)).length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix))}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){p(c(r.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(t){p(c(r.prototype),"unmaskedValue",String(t),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}},{key:"typedValueEquals",value:function(t){return(f(c(r.prototype),"typedValueEquals",this).call(this,t)||r.EMPTY_VALUES.includes(t)&&r.EMPTY_VALUES.includes(this.typedValue))&&!(0===t&&""===this.value)}}]),r}()),r=(t.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},t.EMPTY_VALUES=[].concat(function(t){if(Array.isArray(t))return K(t)}(r=s.EMPTY_VALUES)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||Z(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[0]),E.MaskedNumber=t,function(){u(e,s);var t=d(e);function e(){return a(this,e),t.apply(this,arguments)}return h(e,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),f(c(e.prototype),"_update",this).call(this,t)}}]),e}()),pt=(E.MaskedFunction=r,["compiledMasks","currentMaskRef","currentMask"]),t=function(){u(n,s);var e=d(n);function n(t){return a(this,n),(t=e.call(this,Object.assign({},n.DEFAULTS,t))).currentMask=null,t}return h(n,[{key:"_update",value:function(t){f(c(n.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map(S):[])}},{key:"_appendCharRaw",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this._applyDispatch(t,e);return this.currentMask&&i.aggregate(this.currentMask._appendChar(t,this.currentMaskFlags(e))),i}},{key:"_applyDispatch",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,s=this.rawInputValue,n=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:s,s=s.slice(n.length),o=this.currentMask,a=new m,r=null==o?void 0:o.state;return this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask&&(this.currentMask!==o?(this.currentMask.reset(),n&&(t=this.currentMask.append(n,{raw:!0}),a.tailShift=t.inserted.length-i.length),s&&(a.tailShift+=this.currentMask.append(s,{raw:!0,tail:!0}).tailShift)):this.currentMask.state=r),a}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"_appendEager",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}},{key:"currentMaskFlags",value:function(t){var e;return Object.assign({},t,{_beforeTailState:(null==(e=t._beforeTailState)?void 0:e.currentMaskRef)===this.currentMask&&(null==(e=t._beforeTailState)?void 0:e.currentMask)||t._beforeTailState})}},{key:"doDispatch",value:function(t){return this.dispatch(t,this,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"doValidate",value:function(t){return f(c(n.prototype),"doValidate",this).call(this,t)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(t)))}},{key:"doPrepare",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=g(w(f(c(n.prototype),"doPrepare",this).call(this,t,e)),2),i=t[0],t=t[1];return this.currentMask&&(i=(e=g(w(f(c(n.prototype),"doPrepare",this).call(this,i,this.currentMaskFlags(e))),2))[0],e=e[1],t=t.aggregate(e)),[i,t]}},{key:"reset",value:function(){var t;null!=(t=this.currentMask)&&t.reset(),this.compiledMasks.forEach(function(t){return t.reset()})}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){p(c(n.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){p(c(n.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){var t;return Boolean(null==(t=this.currentMask)?void 0:t.isComplete)}},{key:"isFilled",get:function(){var t;return Boolean(null==(t=this.currentMask)?void 0:t.isFilled)}},{key:"remove",value:function(){var t,e=new m;return this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch()),e}},{key:"state",get:function(){var t;return Object.assign({},f(c(n.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(function(t){return t.state}),currentMaskRef:this.currentMask,currentMask:null==(t=this.currentMask)?void 0:t.state})},set:function(t){var i=t.compiledMasks,e=t.currentMaskRef,s=t.currentMask,t=o(t,pt);this.compiledMasks.forEach(function(t,e){return t.state=i[e]}),null!=e&&(this.currentMask=e,this.currentMask.state=s),p(c(n.prototype),"state",t,this,!0)}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.currentMask?(t=this.currentMask).extractTail.apply(t,i):(t=f(c(n.prototype),"extractTail",this)).call.apply(t,[this].concat(i))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),f(c(n.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,i):(t=f(c(n.prototype),"nearestInputPos",this)).call.apply(t,[this].concat(i))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:f(c(n.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}},{key:"eager",get:function(){return this.currentMask?this.currentMask.eager:f(c(n.prototype),"eager",this)},set:function(t){console.warn('"eager" option is not available in dynamic mask, use this option in siblings')}},{key:"maskEquals",value:function(i){return Array.isArray(i)&&this.compiledMasks.every(function(t,e){return t.maskEquals(null==(t=i[e])?void 0:t.mask)})}},{key:"typedValueEquals",value:function(t){var e;return Boolean(null==(e=this.currentMask)?void 0:e.typedValueEquals(t))}}]),n}(),gt=(t.DEFAULTS={dispatch:function(i,s,n){var o,t;if(s.compiledMasks.length)return o=s.rawInputValue,(t=s.compiledMasks.map(function(t,e){return t.reset(),t.append(o,{raw:!0}),t.append(i,s.currentMaskFlags(n)),{weight:t.rawInputValue.length,index:e}})).sort(function(t,e){return e.weight-t.weight}),s.compiledMasks[t[0].index]}},E.MaskedDynamic=t,{MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"});function mt(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:gt.MASKED,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:gt.MASKED,n=S(t);return function(e){return n.runIsolated(function(t){return t[i]=e,t[s]})}}E.PIPE_TYPE=gt,E.createPipe=mt,E.pipe=function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return mt.apply(void 0,i)(t)};try{globalThis.IMask=E}catch(P){}var vt=Object.defineProperty,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,xt=(t,e,i)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,wt=(t,e)=>{for(var i in e=e||{})bt.call(e,i)&&xt(t,i,e[i]);if(yt)for(var i of yt(e))kt.call(e,i)&&xt(t,i,e[i]);return t},_=(t,e,i)=>(xt(t,"symbol"!=typeof e?e+"":e,i),i);const Ct=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Et=/^[0-9]+$/,St=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,_t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;var A=(t=>(t.Required="required",t.Email="email",t.MinLength="minLength",t.MaxLength="maxLength",t.Password="password",t.Number="number",t.MaxNumber="maxNumber",t.MinNumber="minNumber",t.StrongPassword="strongPassword",t.CustomRegexp="customRegexp",t.MinFilesCount="minFilesCount",t.MaxFilesCount="maxFilesCount",t.Files="files",t))({}),At=(t=>(t.Required="required",t))({}),Ft=(t=>(t.Label="label",t.LabelArrow="labelArrow",t))({});const Lt=t=>!!t&&"function"==typeof t.then,F=t=>Array.isArray(t)?t.filter(t=>0<t.length):"string"==typeof t&&t.trim()?[...t.split(" ").filter(t=>0<t.length)]:[],Pt={errorFieldStyle:{color:"#b81111",border:"1px solid #B81111"},errorFieldCssClass:"just-validate-error-field",successFieldCssClass:"just-validate-success-field",errorLabelStyle:{color:"#b81111"},errorLabelCssClass:"just-validate-error-label",successLabelCssClass:"just-validate-success-label",focusInvalidField:!0,lockForm:!0,testingMode:!1};function Tt(t){return function(t){if(Array.isArray(t))return $t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?$t(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?$t(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var r=document.getElementById("tel"),t=document.getElementById("phone-two"),Mt={mask:"+{7}(000)000-00-00"},It=(E(r,Mt),E(t,Mt),new class{constructor(t,e,i){_(this,"form",null),_(this,"fields",{}),_(this,"groupFields",{}),_(this,"errors",{}),_(this,"isValid",!1),_(this,"isSubmitted",!1),_(this,"globalConfig",Pt),_(this,"errorLabels",{}),_(this,"successLabels",{}),_(this,"eventListeners",[]),_(this,"dictLocale",[]),_(this,"currentLocale"),_(this,"customStyleTags",{}),_(this,"onSuccessCallback"),_(this,"onFailCallback"),_(this,"tooltips",[]),_(this,"lastScrollPosition"),_(this,"isScrollTick"),_(this,"refreshAllTooltips",()=>{this.tooltips.forEach(t=>{t.refresh()})}),_(this,"handleDocumentScroll",()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame(()=>{this.refreshAllTooltips(),this.isScrollTick=!1}),this.isScrollTick=!0)}),_(this,"formSubmitHandler",t=>{t.preventDefault(),this.isSubmitted=!0,this.validateHandler(t)}),_(this,"handleFieldChange",t=>{let e;for(const i in this.fields)if(this.fields[i].elem===t){e=i;break}e&&this.validateField(e,!0)}),_(this,"handleGroupChange",e=>{let t,i;for(const n in this.groupFields){var s=this.groupFields[n];if(s.elems.find(t=>t===e)){t=s,i=n;break}}t&&i&&this.validateGroup(i,t)}),_(this,"handlerChange",t=>{t.target&&(this.handleFieldChange(t.target),this.handleGroupChange(t.target),this.renderErrors())}),this.initialize(t,e,i)}initialize(t,e,i){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=Pt,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],"string"==typeof t){var s=document.querySelector(t);if(!s)throw Error(`Form with ${t} selector not found! Please check the form selector`);this.setForm(s)}else{if(!(t instanceof HTMLFormElement))throw Error("Form selector is not valid. Please specify a string selector or a DOM element.");this.setForm(t)}this.globalConfig=wt(wt({},Pt),e),i&&(this.dictLocale=i),this.isTooltip()&&((s=document.createElement("style")).textContent=".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}",this.customStyleTags[Ft.Label]=document.head.appendChild(s),this.addListener("scroll",document,this.handleDocumentScroll))}getLocalisedString(e){var t;return this.currentLocale&&this.dictLocale.length&&(null==(t=this.dictLocale.find(t=>t.key===e))?void 0:t.dict[this.currentLocale])||e}getFieldErrorMessage(t,e){e="function"==typeof t.errorMessage?t.errorMessage(this.getElemValue(e),this.fields):t.errorMessage;return this.getLocalisedString(e)||((t,e)=>{switch(t){case A.Required:return"The field is required";case A.Email:return"Email has invalid format";case A.MaxLength:return"The field must contain a maximum of :value characters".replace(":value",String(e));case A.MinLength:return"The field must contain a minimum of :value characters".replace(":value",String(e));case A.Password:return"Password must contain minimum eight characters, at least one letter and one number";case A.Number:return"Value should be a number";case A.StrongPassword:return"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character";case A.MaxNumber:return"Number should be less or equal than :value".replace(":value",String(e));case A.MinNumber:return"Number should be more or equal than :value".replace(":value",String(e));case A.MinFilesCount:return"Files count should be more or equal than :value".replace(":value",String(e));case A.MaxFilesCount:return"Files count should be less or equal than :value".replace(":value",String(e));case A.Files:return"Uploaded files have one or several invalid properties (extension/size/type etc)";default:return"Value is incorrect"}})(t.rule,t.value)}getFieldSuccessMessage(t,e){e="function"==typeof t?t(this.getElemValue(e),this.fields):t;return this.getLocalisedString(e)}getGroupErrorMessage(t){return this.getLocalisedString(t.errorMessage)||(t.rule!==At.Required?"Group is incorrect":"The field is required")}getGroupSuccessMessage(t){return this.getLocalisedString(t.successMessage)}setFieldInvalid(t,e){this.fields[t].isValid=!1,this.fields[t].errorMessage=this.getFieldErrorMessage(e,this.fields[t].elem)}setFieldValid(t,e){this.fields[t].isValid=!0,void 0!==e&&(this.fields[t].successMessage=this.getFieldSuccessMessage(e,this.fields[t].elem))}setGroupInvalid(t,e){this.groupFields[t].isValid=!1,this.groupFields[t].errorMessage=this.getGroupErrorMessage(e)}setGroupValid(t,e){this.groupFields[t].isValid=!0,this.groupFields[t].successMessage=this.getGroupSuccessMessage(e)}getElemValue(t){switch(t.type){case"checkbox":return t.checked;case"file":return t.files;default:return t.value}}validateGroupRule(t,e,i){i.rule===At.Required&&(e.every(t=>!t.checked)?this.setGroupInvalid(t,i):this.setGroupValid(t,i))}validateFieldRule(i,t,s,e=!1){var n,o,a,r,l,h,u,c=s.value,d=this.getElemValue(t);if(s.plugin)s.plugin(d,this.fields)||this.setFieldInvalid(i,s);else switch(s.rule){case A.Required:(t=>{let e=t;return!(e="string"==typeof t?t.trim():e)})(d)&&this.setFieldInvalid(i,s);break;case A.Email:"string"!=typeof d?this.setFieldInvalid(i,s):(u=d,Ct.test(u)||this.setFieldInvalid(i,s));break;case A.MaxLength:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):("string"!=typeof d||""!==d&&d.length>c)&&this.setFieldInvalid(i,s);break;case A.MinLength:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):("string"!=typeof d||""!==d&&d.length<c)&&this.setFieldInvalid(i,s);break;case A.Password:"string"!=typeof d?this.setFieldInvalid(i,s):""!==d&&(u=d,St.test(u)||this.setFieldInvalid(i,s));break;case A.StrongPassword:"string"!=typeof d?this.setFieldInvalid(i,s):""!==d&&(h=d,_t.test(h)||this.setFieldInvalid(i,s));break;case A.Number:"string"!=typeof d?this.setFieldInvalid(i,s):""!==d&&(h=d,Et.test(h)||this.setFieldInvalid(i,s));break;case A.MaxNumber:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):"string"!=typeof d?this.setFieldInvalid(i,s):""!==d&&(f=+d,(Number.isNaN(f)||c<f)&&this.setFieldInvalid(i,s));break;case A.MinNumber:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):"string"!=typeof d?this.setFieldInvalid(i,s):""!==d&&(f=+d,(Number.isNaN(f)||f<c)&&this.setFieldInvalid(i,s));break;case A.CustomRegexp:{if(void 0===c)return console.error(`Value for ${s.rule} rule for [${i}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(i,s);let t;try{t=new RegExp(c)}catch(t){console.error(`Value for ${s.rule} rule for [${i}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(i,s);break}var f=String(d);""===f||t.test(f)||this.setFieldInvalid(i,s);break}case A.MinFilesCount:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):Number.isFinite(null==d?void 0:d.length)&&d.length<c&&this.setFieldInvalid(i,s);break;case A.MaxFilesCount:void 0===c?(console.error(`Value for ${s.rule} rule for [${i}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(i,s)):"number"!=typeof c?(console.error(`Value for ${s.rule} rule for [${i}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(i,s)):Number.isFinite(null==d?void 0:d.length)&&d.length>c&&this.setFieldInvalid(i,s);break;case A.Files:if(void 0===c)return console.error(`Value for ${s.rule} rule for [${i}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(i,s);if("object"!=typeof c)return console.error(`Value for ${s.rule} rule for [${i}] field should be an object. This field will be always invalid.`),void this.setFieldInvalid(i,s);var p=c.files;if("object"!=typeof p)return console.error(`Value for ${s.rule} rule for [${i}] field should be an object with files array. This field will be always invalid.`),void this.setFieldInvalid(i,s);if("object"==typeof d&&null!==d)for(let t=0,e=d.length;t<e;++t){var g=d.item(t);if(!g){this.setFieldInvalid(i,s);break}if(g=g,n=p,l=r=a=o=void 0,o=Number.isFinite(n.minSize)&&g.size<n.minSize,a=Number.isFinite(n.maxSize)&&g.size>n.maxSize,r=Array.isArray(n.names)&&!n.names.includes(g.name),l=Array.isArray(n.extensions)&&!n.extensions.includes(g.name.split(".")[g.name.split(".").length-1]),n=Array.isArray(n.types)&&!n.types.includes(g.type),o||a||r||l||n){this.setFieldInvalid(i,s);break}}break;default:if("function"!=typeof s.validator)console.error(`Validator for custom rule for [${i}] field should be a function. This field will be always invalid.`),this.setFieldInvalid(i,s);else{var m,f=s.validator(d,this.fields);if("boolean"!=typeof f&&"function"!=typeof f&&console.error(`Validator return value for [${i}] field should be boolean or function. It will be cast to boolean.`),"function"==typeof f){if(!e)return this.fields[i].asyncCheckPending=!1,m=f(),Lt(m)?m.then(t=>{t||this.setFieldInvalid(i,s)}).catch(()=>{this.setFieldInvalid(i,s)}):(console.error(`Validator function for custom rule for [${i}] field should return a Promise. This field will be always invalid.`),void this.setFieldInvalid(i,s));this.fields[i].asyncCheckPending=!0}f||this.setFieldInvalid(i,s)}}}validateField(e,i=!1){var t;const s=this.fields[e],n=(s.isValid=!0,[]);return[...s.rules].reverse().forEach(t=>{t=this.validateFieldRule(e,s.elem,t,i);Lt(t)&&n.push(t)}),s.isValid&&this.setFieldValid(e,null==(t=s.config)?void 0:t.successMessage),Promise.allSettled(n)}revalidateField(e){if("string"!=typeof e)throw Error("Field selector is not valid. Please specify a string selector.");return this.fields[e]?new Promise(t=>{this.validateField(e,!0).finally(()=>{this.clearFieldStyle(e),this.clearFieldLabel(e),this.renderFieldError(e),t(!!this.fields[e].isValid)})}):(console.error("Field not found. Check the field selector."),Promise.reject())}validateGroup(e,i){const s=[];return[...i.rules].reverse().forEach(t=>{t=this.validateGroupRule(e,i.elems,t);Lt(t)&&s.push(t)}),Promise.allSettled(s)}focusInvalidField(){for(const t in this.fields){const e=this.fields[t];if(!e.isValid){setTimeout(()=>e.elem.focus(),0);break}}}afterSubmitValidation(t=!1){this.renderErrors(t),this.globalConfig.focusInvalidField&&this.focusInvalidField()}validate(e=!1){return new Promise(t=>{const i=[];Object.keys(this.fields).forEach(t=>{t=this.validateField(t);Lt(t)&&i.push(t)}),Object.keys(this.groupFields).forEach(t=>{var e=this.groupFields[t],t=this.validateGroup(t,e);Lt(t)&&i.push(t)}),i.length?Promise.allSettled(i).then(()=>{this.afterSubmitValidation(e),t(!0)}):(this.afterSubmitValidation(e),t(!1))})}revalidate(){return new Promise(t=>{this.validateHandler(void 0,!0).finally(()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),t(this.isValid)})})}validateHandler(e,t=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(t).finally(()=>{var t;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?null!=(t=this.onSuccessCallback)&&t.call(this,e):null!=(t=this.onFailCallback)&&t.call(this,this.fields,this.groupFields)})}setForm(t){this.form=t,this.form.setAttribute("novalidate","novalidate"),this.removeListener("submit",this.form,this.formSubmitHandler),this.addListener("submit",this.form,this.formSubmitHandler)}addListener(t,e,i){e.addEventListener(t,i),this.eventListeners.push({type:t,elem:e,func:i})}removeListener(e,i,t){i.removeEventListener(e,t),this.eventListeners=this.eventListeners.filter(t=>t.type!==e||t.elem!==i)}addField(e,t,i){if("string"!=typeof e)throw Error("Field selector is not valid. Please specify a string selector.");var s=this.form.querySelector(e);if(!s)throw Error(`Field with ${e} selector not found! Please check the field selector.`);if(Array.isArray(t)&&t.length)return t.forEach(t=>{if(!("rule"in t||"validator"in t||"plugin"in t))throw Error(`Rules argument for the field [${e}] must contain at least one rule or validator property.`);if(!(t.validator||t.plugin||t.rule&&Object.values(A).includes(t.rule)))throw Error(`Rule should be one of these types: ${Object.values(A).join(", ")}. Provided value: `+t.rule)}),this.fields[e]={elem:s,rules:t,isValid:void 0,config:i},this.setListeners(s),this.isSubmitted&&this.validate(),this;throw Error(`Rules argument for the field [${e}] should be an array and should contain at least 1 element.`)}removeField(t){if("string"!=typeof t)throw Error("Field selector is not valid. Please specify a string selector.");var e;return this.fields[t]?(e=this.getListenerType(this.fields[t].elem.type),this.removeListener(e,this.fields[t].elem,this.handlerChange),this.clearErrors(),delete this.fields[t]):console.error("Field not found. Check the field selector."),this}removeGroup(t){if("string"!=typeof t)throw Error("Group selector is not valid. Please specify a string selector.");return this.groupFields[t]?(this.groupFields[t].elems.forEach(t=>{var e=this.getListenerType(t.type);this.removeListener(e,t,this.handlerChange)}),this.clearErrors(),delete this.groupFields[t]):console.error("Group not found. Check the group selector."),this}addRequiredGroup(t,e,i,s){if("string"!=typeof t)throw Error("Group selector is not valid. Please specify a string selector.");var n,o,a=this.form.querySelector(t);if(a)return n=a.querySelectorAll("input"),o=Array.from(n).filter(e=>{var t=((i,t)=>{var s=[...t].reverse();for(let t=0,e=s.length;t<e;++t){var n=s[t];for(const a in i){var o=i[a];if(o.groupElem===n)return[a,o]}}return null})(this.groupFields,(t=>{let e=t;for(var i=[];e;)i.unshift(e),e=e.parentNode;return i})(e));return!t||t[1].elems.find(t=>t!==e)}),this.groupFields[t]={rules:[{rule:At.Required,errorMessage:e,successMessage:s}],groupElem:a,elems:o,isDirty:!1,isValid:void 0,config:i},n.forEach(t=>{this.setListeners(t)}),this;throw Error(`Group with ${t} selector not found! Please check the group selector.`)}getListenerType(t){switch(t){case"checkbox":case"select-one":case"file":case"radio":return"change";default:return"input"}}setListeners(t){var e=this.getListenerType(t.type);this.removeListener(e,t,this.handlerChange),this.addListener(e,t,this.handlerChange)}clearFieldLabel(t){var e;null!=(e=this.errorLabels[t])&&e.remove(),null!=(e=this.successLabels[t])&&e.remove()}clearFieldStyle(t){const e=this.fields[t];var t=(null==(t=e.config)?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle,t=(Object.keys(t).forEach(t=>{e.elem.style[t]=""}),(null==(t=e.config)?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle||{});Object.keys(t).forEach(t=>{e.elem.style[t]=""}),e.elem.classList.remove(...F((null==(t=e.config)?void 0:t.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...F((null==(t=e.config)?void 0:t.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){Object.keys(this.errorLabels).forEach(t=>this.errorLabels[t].remove()),Object.keys(this.successLabels).forEach(t=>this.successLabels[t].remove());for(const e in this.fields)this.clearFieldStyle(e);for(const i in this.groupFields){const s=this.groupFields[i];var t=(null==(t=s.config)?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle,t=(Object.keys(t).forEach(e=>{s.elems.forEach(t=>{t.style[e]="",t.classList.remove(...F((null==(t=s.config)?void 0:t.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))})}),(null==(t=s.config)?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle||{});Object.keys(t).forEach(e=>{s.elems.forEach(t=>{t.style[e]="",t.classList.remove(...F((null==(t=s.config)?void 0:t.successFieldCssClass)||this.globalConfig.successFieldCssClass))})})}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){var i=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,e=i.length;t<e;++t)i[t].setAttribute("data-just-validate-fallback-disabled",i[t].disabled?"true":"false"),i[t].setAttribute("disabled","disabled"),i[t].style.pointerEvents="none",i[t].style.webkitFilter="grayscale(100%)",i[t].style.filter="grayscale(100%)"}unlockForm(){var i=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,e=i.length;t<e;++t)"true"!==i[t].getAttribute("data-just-validate-fallback-disabled")&&i[t].removeAttribute("disabled"),i[t].style.pointerEvents="",i[t].style.webkitFilter="",i[t].style.filter=""}renderTooltip(t,e,i){var{top:s,left:n,width:o,height:a}=t.getBoundingClientRect(),r=e.getBoundingClientRect(),l=i||(null==(l=this.globalConfig.tooltip)?void 0:l.position);switch(l){case"left":e.style.top=s+a/2-r.height/2+"px",e.style.left=n-r.width-5+"px";break;case"top":e.style.top=s-r.height-5+"px",e.style.left=n+o/2-r.width/2+"px";break;case"right":e.style.top=s+a/2-r.height/2+"px",e.style.left=n+o+5+"px";break;case"bottom":e.style.top=s+a+5+"px",e.style.left=n+o/2-r.width/2+"px"}e.dataset.direction=l;return{refresh:()=>{this.renderTooltip(t,e,i)}}}createErrorLabelElem(t,e,i){var s=document.createElement("div"),e=(s.innerHTML=e,this.isTooltip()?null==i?void 0:i.errorLabelStyle:(null==i?void 0:i.errorLabelStyle)||this.globalConfig.errorLabelStyle);return Object.assign(s.style,e),s.classList.add(...F((null==i?void 0:i.errorLabelCssClass)||this.globalConfig.errorLabelCssClass),"just-validate-error-label"),this.isTooltip()&&(s.dataset.tooltip="true"),this.globalConfig.testingMode&&(s.dataset.testId="error-label-"+t),this.errorLabels[t]=s}createSuccessLabelElem(t,e,i){var s;return void 0===e?null:((s=document.createElement("div")).innerHTML=e,e=(null==i?void 0:i.successLabelStyle)||this.globalConfig.successLabelStyle,Object.assign(s.style,e),s.classList.add(...F((null==i?void 0:i.successLabelCssClass)||this.globalConfig.successLabelCssClass),"just-validate-success-label"),this.globalConfig.testingMode&&(s.dataset.testId="success-label-"+t),this.successLabels[t]=s)}renderErrorsContainer(t,e){e=e||this.globalConfig.errorsContainer;if("string"==typeof e){var i=this.form.querySelector(e);if(i)return i.appendChild(t),!0;console.error(`Error container with ${e} selector not found. Errors will be rendered as usual`)}return e instanceof Element?(e.appendChild(t),!0):(void 0!==e&&console.error("Error container not found. It should be a string or existing Element. Errors will be rendered as usual"),!1)}renderGroupLabel(t,e,i,s){if(!s&&this.renderErrorsContainer(e,i))return;t.appendChild(e)}renderFieldLabel(t,e,i,s){if(!s&&this.renderErrorsContainer(e,i))return;"checkbox"===t.type||"radio"===t.type?(s=document.querySelector(`label[for="${t.getAttribute("id")}"]`),"label"===(null==(i=null==(i=t.parentElement)?void 0:i.tagName)?void 0:i.toLowerCase())?null!=(i=null==(i=t.parentElement)?void 0:i.parentElement)&&i.appendChild(e):s?null!=(i=s.parentElement)&&i.appendChild(e):null!=(s=t.parentElement)&&s.appendChild(e)):null!=(i=t.parentElement)&&i.appendChild(e)}showLabels(n,o){Object.keys(n).forEach((t,e)=>{var i=n[t];const s=this.fields[t];s.isValid=!o,this.clearFieldStyle(t),this.clearFieldLabel(t),this.renderFieldError(t,i),0===e&&this.globalConfig.focusInvalidField&&setTimeout(()=>s.elem.focus(),0)})}showErrors(t){if("object"!=typeof t)throw Error("[showErrors]: Errors should be an object with key: value format");this.showLabels(t,!0)}showSuccessLabels(t){if("object"!=typeof t)throw Error("[showSuccessLabels]: Labels should be an object with key: value format");this.showLabels(t,!1)}renderFieldError(t,e){var i,s=this.fields[t];s.isValid?s.asyncCheckPending||((i=this.createSuccessLabelElem(t,void 0!==e?e:s.successMessage,s.config))&&this.renderFieldLabel(s.elem,i,null==(i=s.config)?void 0:i.errorsContainer,!0),s.elem.classList.add(...F((null==(i=s.config)?void 0:i.successFieldCssClass)||this.globalConfig.successFieldCssClass))):(this.isValid=!1,s.elem.classList.add(...F((null==(i=s.config)?void 0:i.errorFieldCssClass)||this.globalConfig.errorFieldCssClass)),i=this.createErrorLabelElem(t,void 0!==e?e:s.errorMessage,s.config),this.renderFieldLabel(s.elem,i,null==(t=s.config)?void 0:t.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(s.elem,i,null==(t=null==(e=s.config)?void 0:e.tooltip)?void 0:t.position)))}renderErrors(t=!1){var e,i;if(this.isSubmitted||t){this.clearErrors(),this.isValid=!0;for(const s in this.groupFields){const n=this.groupFields[s];n.isValid?(n.elems.forEach(t=>{var e;Object.assign(t.style,(null==(e=n.config)?void 0:e.successFieldStyle)||this.globalConfig.successFieldStyle),t.classList.add(...F((null==(e=n.config)?void 0:e.successFieldCssClass)||this.globalConfig.successFieldCssClass))}),(i=this.createSuccessLabelElem(s,n.successMessage,n.config))&&this.renderGroupLabel(n.groupElem,i,null==(i=n.config)?void 0:i.errorsContainer,!0)):(this.isValid=!1,n.elems.forEach(t=>{var e;Object.assign(t.style,(null==(e=n.config)?void 0:e.errorFieldStyle)||this.globalConfig.errorFieldStyle),t.classList.add(...F((null==(e=n.config)?void 0:e.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))}),i=this.createErrorLabelElem(s,n.errorMessage,n.config),this.renderGroupLabel(n.groupElem,i,null==(e=n.config)?void 0:e.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(n.groupElem,i,null==(e=null==(e=n.config)?void 0:e.tooltip)?void 0:e.position)))}for(const o in this.fields)this.renderFieldError(o)}}destroy(){this.eventListeners.forEach(t=>{this.removeListener(t.type,t.elem,t.func)}),Object.keys(this.customStyleTags).forEach(t=>{this.customStyleTags[t].remove()}),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach(t=>{this.addField(t,[...this.fields[t].rules],this.fields[t].config)})):console.error("Cannot initialize the library! Form is not defined")}setCurrentLocale(t){"string"!=typeof t&&void 0!==t?console.error("Current locale should be a string"):(this.currentLocale=t,this.isSubmitted&&this.validate())}onSuccess(t){return this.onSuccessCallback=t,this}onFail(t){return this.onFailCallback=t,this}}("#form",{errorFieldCssClass:"is-invalid",errorFieldStyle:{border:"5px solid red"},errorLabelStyle:{fontSize:"12px",color:"#fcee09",margin:"7px 0 0",display:"flex",alignItems:"center",justifyContent:"flex-end"},errorLabelCssClass:"error",successFieldCssClass:"is-valid",focusInvalidField:!0,lockForm:!0},[{key:"Field is required",dict:{ru:",   "}},{key:"Name is too short",dict:{ru:"  "}},{key:"Name is too long",dict:{ru:"  "}},{key:"Email is required",dict:{ru:"Email -  "}},{key:"Email is invalid",dict:{ru:"  Email"}},{key:"Phone is invalid",dict:{ru:"  "}},{key:"Message is too short",dict:{ru:"  "}},{key:"Message is too long",dict:{ru:"  "}}]));It.setCurrentLocale("ru"),It.addField("#name",[{rule:"required",errorMessage:"Field is required"},{rule:"minLength",value:3,errorMessage:"Name is too short"},{rule:"maxLength",value:30,errorMessage:"Name is too long"}]).addField("#email",[{rule:"required",errorMessage:"Email is required"},{rule:"email",errorMessage:"Email is invalid"}]).addField("#tel",[{rule:"required",value:!0,errorMessage:"Field is required"},{rule:"minLength",value:16,errorMessage:"Phone is invalid"}]).addField("#message",[{rule:"required",errorMessage:"Field is required"},{rule:"minLength",value:30,errorMessage:"Message is too short"},{rule:"maxLength",value:150,errorMessage:"Message is too long"}]).onSuccess(function(t){console.log("Validation passes and form submitted",t);var e,i=new FormData(t.target),s=((e=console).log.apply(e,Tt(i)),new XMLHttpRequest);s.onreadystatechange=function(){4===s.readyState&&200===s.status&&console.log("")},s.open("POST","mail.php",!0),s.send(i),t.target.reset()}),document.getElementById("reset").addEventListener("click",function(){document.getElementById("message").innerHTML="",document.getElementById("name").innerHTML="",document.getElementById("email").innerHTML="",document.getElementById("tel").innerHTML="",It.refresh()}),$("#form-two").submit(function(){var t=$(this);return $.ajax({type:"POST",url:"mail.php",data:t.serialize()}).done(function(){alert("Thank you!"),setTimeout(function(){t.trigger("reset")},1e3)}),!1});function Bt(t){return!!(t&&"object"==typeof t&&t instanceof Element&&t!==document.body)&&!t.__Panzoom&&(e=t,i=getComputedStyle(e)["overflow-y"],s=getComputedStyle(e)["overflow-x"],i=("scroll"===i||"auto"===i)&&1<Math.abs(e.scrollHeight-e.clientHeight),s=("scroll"===s||"auto"===s)&&1<Math.abs(e.scrollWidth-e.clientWidth),i||s?t:Bt(t.parentNode));var e,i,s}const L=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),P=(...t)=>{let e=!1;"boolean"==typeof t[0]&&(e=t.shift());var i=t[0];if(!i||"object"!=typeof i)throw new Error("extendee must be an object");const s=t.slice(1),n=s.length;for(let t=0;t<n;t++){const n=s[t];for(var o in n)if(n.hasOwnProperty(o)){const s=n[o];if(e&&(Array.isArray(s)||L(s))){const L=Array.isArray(s)?[]:{};i[o]=P(!0,i.hasOwnProperty(o)?i[o]:L,s)}else i[o]=s}}return i},T=(t,e=1e4)=>(t=parseFloat(t)||0,Math.round((t+Number.EPSILON)*e)/e),Ot="undefined"!=typeof window&&window.ResizeObserver||class{constructor(t){this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=t}observe(e){var t;this.observables.some(t=>t.el===e)||(t={el:e,size:{height:e.clientHeight,width:e.clientWidth}},this.observables.push(t))}unobserve(e){this.observables=this.observables.filter(t=>t.el!==e)}disconnect(){this.observables=[]}check(){var t=this.observables.filter(t=>{var e=t.el.clientHeight,i=t.el.clientWidth;if(t.size.height!==e||t.size.width!==i)return t.size.height=e,t.size.width=i,!0}).map(t=>t.el);0<t.length&&this.callback(t),window.requestAnimationFrame(this.boundCheck)}};class M{constructor(t){this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY}}const Dt=(t,e)=>e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0,Rt=(t,e)=>e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t;class zt{constructor(t,{start:e=()=>!0,move:i=()=>{},end:s=()=>{}}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._pointerStart=t=>{if(!(0<t.buttons&&0!==t.button)){const e=new M(t);this.currentPointers.some(t=>t.id===e.id)||this._triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd))}},this._touchStart=t=>{for(const e of Array.from(t.changedTouches||[]))this._triggerPointerStart(new M(e),t)},this._move=e=>{const t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches).map(t=>new M(t)):[new M(e)];for(const e of i){const t=this.currentPointers.findIndex(t=>t.id===e.id);t<0||(this.currentPointers[t]=e)}this._moveCallback(t,this.currentPointers.slice(),e)},this._triggerPointerEnd=(e,t)=>{var i=this.currentPointers.findIndex(t=>t.id===e.id);return!(i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this._endCallback(e,t),0))},this._pointerEnd=t=>{0<t.buttons&&0!==t.button||this._triggerPointerEnd(new M(t),t)&&(window.removeEventListener("mousemove",this._move,{passive:!1}),window.removeEventListener("mouseup",this._pointerEnd,{passive:!1}))},this._touchEnd=t=>{for(const e of Array.from(t.changedTouches||[]))this._triggerPointerEnd(new M(e),t)},this._startCallback=e,this._moveCallback=i,this._endCallback=s,this._element.addEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.addEventListener("touchstart",this._touchStart,{passive:!1}),this._element.addEventListener("touchmove",this._move,{passive:!1}),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd)}stop(){this._element.removeEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.removeEventListener("touchstart",this._touchStart,{passive:!1}),this._element.removeEventListener("touchmove",this._move,{passive:!1}),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,e){return!!this._startCallback(t,e)&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}}class Vt{constructor(t={}){this.options=P(!0,{},t),this.plugins=[],this.events={};for(const t of["on","once"])for(const P of Object.entries(this.options[t]||{}))this[t](...P)}option(t,e,...i){t=t=String(t),n=this.options;let s=t.split(".").reduce(function(t,e){return t&&t[e]},n);var n;return void 0===(s="function"==typeof s?s.call(this,this,...i):s)?e:s}localize(t,n=[]){return(t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(t,e,i)=>{let s="";i?s=this.option(e[0]+e.toLowerCase().substring(1)+".l10n."+i):e&&(s=this.option("l10n."+e)),s=s||t;for(let t=0;t<n.length;t++)s=s.split(n[t][0]).join(n[t][1]);return s})).replace(/\{\{(.*)\}\}/,(t,e)=>e)}on(t,e){if(L(t))for(const L of Object.entries(t))this.on(...L);else String(t).split(" ").forEach(t=>{t=this.events[t]=this.events[t]||[];-1==t.indexOf(e)&&t.push(e)});return this}once(t,s){if(L(t))for(const L of Object.entries(t))this.once(...L);else String(t).split(" ").forEach(e=>{const i=(...t)=>{this.off(e,i),s.call(this,this,...t)};i._=s,this.on(e,i)});return this}off(t,o){if(!L(t))return t.split(" ").forEach(t=>{var i=this.events[t];if(!i||!i.length)return this;let s=-1;for(let t=0,e=i.length;t<e;t++){var n=i[t];if(n&&(n===o||n._===o)){s=t;break}}-1!=s&&i.splice(s,1)}),this;for(const L of Object.entries(t))this.off(...L)}trigger(t,...e){for(const i of[...this.events[t]||[]].slice())if(i&&!1===i.call(this,this,...e))return!1;for(const s of[...this.events["*"]||[]].slice())if(s&&!1===s.call(this,t,this,...e))return!1;return!0}attachPlugins(t){var e,i,s={};for([e,i]of Object.entries(t||{}))!1===this.options[e]||this.plugins[e]||(this.options[e]=P({},i.defaults||{},this.options[e]),s[e]=new i(this));for(const[t,P]of Object.entries(s))P.attach(this);return this.plugins=Object.assign({},this.plugins,s),this}detachPlugins(){for(const e in this.plugins){var t;(t=this.plugins[e])&&"function"==typeof t.detach&&t.detach(this)}return this.plugins={},this}}const jt={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1};class Nt extends Vt{constructor(t,e={}){super(P(!0,{},jt,e)),this.state="init",this.$container=t;for(const t of["onLoad","onWheel","onClick"])this[t]=this[t].bind(this);this.initLayout(),this.resetValues(),this.attachPlugins(Nt.Plugins),this.trigger("init"),this.updateMetrics(),this.attachEvents(),this.trigger("ready"),!1===this.option("centerOnStart")?this.state="ready":this.panTo({friction:0}),t.__Panzoom=this}initLayout(){var t=this.$container;if(!(t instanceof HTMLElement))throw new Error("Panzoom: Container not found");var e=this.option("content")||t.querySelector(".panzoom__content");if(!e)throw new Error("Panzoom: Content not found");this.$content=e;let i=this.option("viewport")||t.querySelector(".panzoom__viewport");i||!1===this.option("wrapInner")||((i=document.createElement("div")).classList.add("panzoom__viewport"),i.append(...t.childNodes),t.appendChild(i)),this.$viewport=i||e.parentNode}resetValues(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origWidth:0,origHeight:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}onLoad(t){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",t)}onClick(t){var e;t.defaultPrevented||document.activeElement&&document.activeElement.closest("[contenteditable]")||(!this.option("textSelection")||!window.getSelection().toString().length||t.target&&t.target.hasAttribute("data-fancybox-close")?(e=this.$content.getClientRects()[0],"ready"!==this.state&&(this.dragPosition.midPoint||1<Math.abs(e.top-this.dragStart.rect.top)||1<Math.abs(e.left-this.dragStart.rect.left))?(t.preventDefault(),t.stopPropagation()):!1!==this.trigger("click",t)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(t.preventDefault(),t.stopPropagation(),this.zoomWithClick(t))):t.stopPropagation())}onWheel(t){!1!==this.trigger("wheel",t)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(t)}zoomWithWheel(t){void 0===this.changedDelta&&(this.changedDelta=0);var e=Math.max(-1,Math.min(1,-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)),i=this.content.scale;let s=i*(100+e*this.option("wheelFactor"))/100;s=e<0&&Math.abs(i-this.option("minScale"))<.01||0<e&&Math.abs(i-this.option("maxScale"))<.01?(this.changedDelta+=Math.abs(e),i):(this.changedDelta=0,Math.max(Math.min(s,this.option("maxScale")),this.option("minScale"))),this.changedDelta>this.option("wheelLimit")||(t.preventDefault(),s!==i&&(e=this.$content.getBoundingClientRect(),i=t.clientX-e.left,t=t.clientY-e.top,this.zoomTo(s,{x:i,y:t})))}zoomWithClick(t){var e=this.$content.getClientRects()[0],i=t.clientX-e.left,t=t.clientY-e.top;this.toggleZoom({x:i,y:t})}attachEvents(){this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver();const u=new zt(this.$container,{start:(t,e)=>{if(!this.option("touch"))return!1;if(this.velocity.scale<0)return!1;var r=e.composedPath()[0];if(!u.currentPointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(r.nodeName))return!1;if(this.option("textSelection")&&((e,i)=>{var s=r.childNodes,n=document.createRange();for(let t=0;t<s.length;t++){var o=s[t];if(o.nodeType===Node.TEXT_NODE){n.selectNodeContents(o);var a=n.getBoundingClientRect();if(e>=a.left&&i>=a.top&&e<=a.right&&i<=a.bottom)return o}}return!1})(t.clientX,t.clientY))return!1}return!Bt(r)&&!1!==this.trigger("touchStart",e)&&("mousedown"===e.type&&e.preventDefault(),this.state="pointerdown",this.resetDragPosition(),this.dragPosition.midPoint=null,this.dragPosition.time=Date.now(),!0)},move:(t,e,i)=>{if("pointerdown"===this.state)if(!1===this.trigger("touchMove",i))i.preventDefault();else if(!(e.length<2&&!0===this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale"))&&(!(1<e.length)||this.option("zoom")&&!1!==this.option("pinchToZoom"))){const s=Rt(t[0],t[1]),n=Rt(e[0],e[1]),o=n.clientX-s.clientX,a=n.clientY-s.clientY,r=Dt(t[0],t[1]),l=Dt(e[0],e[1]),h=r&&l?l/r:1;this.dragOffset.x+=o,this.dragOffset.y+=a,this.dragOffset.scale*=h,this.dragOffset.time=Date.now()-this.dragPosition.time;t=1===this.dragStart.scale&&this.option("lockAxis");if(t&&!this.lockAxis){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void i.preventDefault();const u=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockAxis=45<u&&u<135?"y":"x"}if("xy"===t||"y"!==this.lockAxis){if(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),this.lockAxis&&(this.dragOffset["x"===this.lockAxis?"y":"x"]=0),this.$container.classList.add(this.option("draggingClass")),this.transform.scale===this.option("baseScale")&&"y"===this.lockAxis||(this.dragPosition.x=this.dragStart.x+this.dragOffset.x),this.transform.scale===this.option("baseScale")&&"x"===this.lockAxis||(this.dragPosition.y=this.dragStart.y+this.dragOffset.y),this.dragPosition.scale=this.dragStart.scale*this.dragOffset.scale,1<e.length){const t=Rt(u.startPointers[0],u.startPointers[1]),e=t.clientX-this.dragStart.rect.x,i=t.clientY-this.dragStart.rect.y,{deltaX:s,deltaY:Dt}=this.getZoomDelta(this.content.scale*this.dragOffset.scale,e,i);this.dragPosition.x-=s,this.dragPosition.y-=Dt,this.dragPosition.midPoint=n}else this.setDragResistance();this.transform={x:this.dragPosition.x,y:this.dragPosition.y,scale:this.dragPosition.scale},this.startAnimation()}}},end:(t,e)=>{if("pointerdown"===this.state)if(this._dragOffset={...this.dragOffset},u.currentPointers.length)this.resetDragPosition();else if(this.state="decel",this.friction=this.option("decelFriction"),this.recalculateTransform(),this.$container.classList.remove(this.option("draggingClass")),!1!==this.trigger("touchEnd",e)&&"decel"===this.state){e=this.option("minScale");if(this.transform.scale<e)this.zoomTo(e,{friction:.64});else{var i=this.option("maxScale");if(.01<this.transform.scale-i){const u=this.dragPosition.midPoint||t,e=this.$content.getClientRects()[0];this.zoomTo(i,{friction:.64,x:u.clientX-e.left,y:u.clientY-e.top})}}}}});this.pointerTracker=u}initObserver(){this.resizeObserver||(this.resizeObserver=new Ot(()=>{this.updateTimer||(this.updateTimer=setTimeout(()=>{var t=this.$container.getBoundingClientRect();t.width&&t.height&&(1<Math.abs(t.width-this.container.width)||1<Math.abs(t.height-this.container.height))&&(this.isAnimating()&&this.endAnimation(!0),this.updateMetrics(),this.panTo({x:this.content.x,y:this.content.y,scale:this.option("baseScale"),friction:0})),this.updateTimer=null},this.updateRate))}),this.resizeObserver.observe(this.$container))}resetDragPosition(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};var{x:t,y:e,scale:i}=this.content;this.dragStart={rect:this.$content.getBoundingClientRect(),x:t,y:e,scale:i},this.dragPosition={...this.dragPosition,x:t,y:e,scale:i},this.dragOffset={x:0,y:0,scale:1,time:0}}updateMetrics(t){!0!==t&&this.trigger("beforeUpdate");var e=this.$container,i=this.$content,s=this.$viewport,n=i instanceof HTMLImageElement,o=this.option("zoom"),a=this.option("resizeParent",o);let r=this.option("width"),l=this.option("height"),h=r||(u=i,Math.max(parseFloat(u.naturalWidth||0),parseFloat(u.width&&u.width.baseVal&&u.width.baseVal.value||0),parseFloat(u.offsetWidth||0),parseFloat(u.scrollWidth||0)));var u,c=l||(u=i,Math.max(parseFloat(u.naturalHeight||0),parseFloat(u.height&&u.height.baseVal&&u.height.baseVal.value||0),parseFloat(u.offsetHeight||0),parseFloat(u.scrollHeight||0))),d=(Object.assign(i.style,{width:r?r+"px":"",height:l?l+"px":"",maxWidth:"",maxHeight:""}),a&&Object.assign(s.style,{width:"",height:""}),this.option("ratio")),d=(h=T(h*d),c=T(c*d),r=h,l=c,i.getBoundingClientRect()),f=s.getBoundingClientRect(),e=s==e?f:e.getBoundingClientRect(),p=Math.max(s.offsetWidth,T(f.width)),f=Math.max(s.offsetHeight,T(f.height)),g=window.getComputedStyle(s);if(p-=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight),f-=parseFloat(g.paddingTop)+parseFloat(g.paddingBottom),this.viewport.width=p,this.viewport.height=f,o){if(.1<Math.abs(h-d.width)||.1<Math.abs(c-d.height)){const t=((t,e,i,s)=>{i=Math.min(i/t||0,s/e);return{width:t*i||0,height:e*i||0}})(h,c,Math.min(h,d.width),Math.min(c,d.height));r=T(t.width),l=T(t.height)}Object.assign(i.style,{width:r+"px",height:l+"px",transform:""})}if(a&&(Object.assign(s.style,{width:r+"px",height:l+"px"}),this.viewport={...this.viewport,width:r,height:l}),n&&o&&"function"!=typeof this.options.maxScale){const t=this.option("maxScale");this.options.maxScale=function(){return 0<this.content.origWidth&&0<this.content.fitWidth?this.content.origWidth/this.content.fitWidth:t}}this.content={...this.content,origWidth:h,origHeight:c,fitWidth:r,fitHeight:l,width:r,height:l,scale:1,isZoomable:o},this.container={width:e.width,height:e.height},!0!==t&&this.trigger("afterUpdate")}zoomIn(t){this.zoomTo(this.content.scale+(t||this.option("step")))}zoomOut(t){this.zoomTo(this.content.scale-(t||this.option("step")))}toggleZoom(t={}){var e=this.option("maxScale"),i=this.option("baseScale"),i=this.content.scale>i+.5*(e-i)?i:e;this.zoomTo(i,t)}zoomTo(t=this.option("baseScale"),{x:e=null,y:i=null}={}){t=Math.max(Math.min(t,this.option("maxScale")),this.option("minScale"));var s=T(this.content.scale/(this.content.width/this.content.fitWidth),1e7),{deltaX:s,deltaY:n}=(null===e&&(e=this.content.width*s*.5),null===i&&(i=this.content.height*s*.5),this.getZoomDelta(t,e,i));e=this.content.x-s,i=this.content.y-n,this.panTo({x:e,y:i,scale:t,friction:this.option("zoomFriction")})}getZoomDelta(t,e=0,i=0){var s=this.content.fitWidth*this.content.scale,n=this.content.fitHeight*this.content.scale;return{deltaX:(this.content.fitWidth*t-s)*(0<e&&s?e/s:0),deltaY:(this.content.fitHeight*t-n)*(0<i&&n?i/n:0)}}panTo({x:t=this.content.x,y:e=this.content.y,scale:i,friction:s=this.option("friction"),ignoreBounds:n=!1}={}){if(i=i||this.content.scale||1,!n){const{boundX:s,boundY:n}=this.getBounds(i);s&&(t=Math.max(Math.min(t,s.to),s.from)),n&&(e=Math.max(Math.min(e,n.to),n.from))}this.friction=s,this.transform={...this.transform,x:t,y:e,scale:i},s?(this.state="panning",this.velocity={x:(1/this.friction-1)*(t-this.content.x),y:(1/this.friction-1)*(e-this.content.y),scale:(1/this.friction-1)*(i-this.content.scale)},this.startAnimation()):this.endAnimation()}startAnimation(){this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame(()=>this.animate())}animate(){if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return void this.endAnimation();this.rAF=requestAnimationFrame(()=>this.animate())}getBounds(t){var e=this.boundX,i=this.boundY;if(void 0===e||void 0===i){e={from:0,to:0},i={from:0,to:0},t=t||this.transform.scale;var s=this.content.fitWidth*t,n=this.content.fitHeight*t,o=this.viewport.width,a=this.viewport.height;if(s<o){const t=T(.5*(o-s));e.from=t,e.to=t}else e.from=T(o-s);if(n<a){const t=.5*(a-n);i.from=t,i.to=t}else i.from=T(a-n)}return{boundX:e,boundY:i}}setEdgeForce(){if("decel"===this.state){var n=this.option("bounceForce"),{boundX:o,boundY:a}=this.getBounds(Math.max(this.transform.scale,this.content.scale));let i,t,s,e;if(o&&(i=this.content.x<o.from,t=this.content.x>o.to),a&&(s=this.content.y<a.from,e=this.content.y>a.to),i||t){let t=((i?o.from:o.to)-this.content.x)*n;const e=this.content.x+(this.velocity.x+t)/this.friction;e>=o.from&&e<=o.to&&(t+=this.velocity.x),this.velocity.x=t,this.recalculateTransform()}if(s||e){let t=((s?a.from:a.to)-this.content.y)*n;const e=this.content.y+(t+this.velocity.y)/this.friction;e>=a.from&&e<=a.to&&(t+=this.velocity.y),this.velocity.y=t,this.recalculateTransform()}}}setDragResistance(){if("pointerdown"===this.state){const{boundX:n,boundY:o}=this.getBounds(this.dragPosition.scale);let e,t,i,s;if(n&&(e=this.dragPosition.x<n.from,t=this.dragPosition.x>n.to),o&&(i=this.dragPosition.y<o.from,s=this.dragPosition.y>o.to),(e||t)&&(!e||!t)){const o=e?n.from:n.to,t=o-this.dragPosition.x;this.dragPosition.x=o-.3*t}if((i||s)&&(!i||!s)){const n=i?o.from:o.to,t=n-this.dragPosition.y;this.dragPosition.y=n-.3*t}}}setDragForce(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}recalculateTransform(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}isAnimating(){return!(!this.friction||!(.05<Math.abs(this.velocity.x)||.05<Math.abs(this.velocity.y)||.05<Math.abs(this.velocity.scale)))}setTransform(t){let e,i,s;var n;t?(e=T(this.transform.x),i=T(this.transform.y),s=this.transform.scale,this.content={...this.content,x:e,y:i,scale:s}):(e=T(this.content.x),i=T(this.content.y),s=this.content.scale/(this.content.width/this.content.fitWidth),this.content={...this.content,x:e,y:i}),this.trigger("beforeTransform"),e=T(this.content.x),i=T(this.content.y),t&&this.option("zoom")?(t=T(this.content.fitWidth*s),n=T(this.content.fitHeight*s),this.content.width=t,this.content.height=n,this.transform={...this.transform,width:t,height:n,scale:s},Object.assign(this.$content.style,{width:t+"px",height:n+"px",maxWidth:"none",maxHeight:"none",transform:`translate3d(${e}px, ${i}px, 0) scale(1)`})):this.$content.style.transform=`translate3d(${e}px, ${i}px, 0) scale(${s})`,this.trigger("afterTransform")}endAnimation(t){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor(),!0!==t&&this.trigger("endAnimation")}handleCursor(){var t=this.option("draggableClass");t&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(t):this.$container.classList.add(t))}detachEvents(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}destroy(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}}Nt.version="4.0.31",Nt.Plugins={};const qt=(i,s)=>{let n=0;return function(...t){var e=(new Date).getTime();if(!(e-n<s))return n=e,i(...t)}};class Ht{constructor(t){this.$container=null,this.$prev=null,this.$next=null,this.carousel=t,this.onRefresh=this.onRefresh.bind(this)}option(t){return this.carousel.option("Navigation."+t)}createButton(e){var t=document.createElement("button"),i=(t.setAttribute("title",this.carousel.localize(`{{${e.toUpperCase()}}}`)),this.option("classNames.button")+" "+this.option("classNames."+e));return t.classList.add(...i.split(" ")),t.setAttribute("tabindex","0"),t.innerHTML=this.carousel.localize(this.option(e+"Tpl")),t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.carousel["slide"+("next"===e?"Next":"Prev")]()}),t}build(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(...this.option("classNames.main").split(" ")),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}onRefresh(){var t=this.carousel.pages.length;t<=1||1<t&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=t-1&&this.$next.setAttribute("disabled","")))}cleanup(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}attach(){this.carousel.on("refresh change",this.onRefresh)}detach(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}Ht.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};class Wt{constructor(t){this.carousel=t,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}addAsTargetFor(t){this.target=this.carousel,this.nav=t,this.attachEvents()}addAsNavFor(t){this.target=t,this.nav=this.carousel,this.attachEvents()}attachEvents(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}onNavReady(){this.onTargetChange(!0)}onNavClick(t,e,i){var s=i.target.closest(".carousel__slide");s&&(i.stopPropagation(),i=parseInt(s.dataset.index,10),s=this.target.findPageForSlide(i),this.target.page!==s&&this.target.slideTo(s,{friction:this.friction}),this.markSelectedSlide(i))}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t=this.target.pages[this.target.page].indexes[0],e=this.nav.findPageForSlide(t);this.nav.slideTo(e),this.markSelectedSlide(t)}markSelectedSlide(t){this.selectedIndex=t,[...this.nav.slides].filter(t=>t.$el&&t.$el.classList.remove("is-nav-selected"));t=this.nav.slides[t];t&&t.$el&&t.$el.classList.add("is-nav-selected")}attach(t){t=t.options.Sync;(t.target||t.nav)&&(t.target?this.addAsNavFor(t.target):t.nav&&this.addAsTargetFor(t.nav),this.friction=t.friction)}detach(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}}Wt.defaults={friction:.92};r={Navigation:Ht,Dots:class{constructor(t){this.carousel=t,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}buildList(){var t;if(!(this.carousel.pages.length<this.carousel.option("Dots.minSlideCount")))return(t=document.createElement("ol")).classList.add("carousel__dots"),t.addEventListener("click",t=>{var e;"page"in t.target.dataset&&(t.preventDefault(),t.stopPropagation(),(t=parseInt(t.target.dataset.page,10))!==(e=this.carousel).page&&(e.pages.length<3&&e.option("infinite")?e[0==t?"slidePrev":"slideNext"]():e.slideTo(t)))}),this.$list=t,this.carousel.$container.appendChild(t),this.carousel.$container.classList.add("has-dots"),t}removeList(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}rebuildDots(){const i=!!this.$list,e=this.carousel.pages.length;if(e<2)i&&this.removeList();else{i||this.buildList();var s=this.$list.children.length;if(e<s)for(let t=e;t<s;t++)this.$list.removeChild(this.$list.lastChild);else{for(let t=s;t<e;t++){const i=document.createElement("li");i.classList.add("carousel__dot"),i.dataset.page=t,i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("title",this.carousel.localize("{{GOTO}}",[["%d",t+1]])),i.addEventListener("keydown",t=>{t=t.code;let e;"Enter"===t||"NumpadEnter"===t?e=i:"ArrowRight"===t?e=i.nextSibling:"ArrowLeft"===t&&(e=i.previousSibling),e&&e.click()}),this.$list.appendChild(i)}this.setActiveDot()}}}setActiveDot(){var t;this.$list&&(this.$list.childNodes.forEach(t=>{t.classList.remove("is-selected")}),(t=this.$list.childNodes[this.carousel.page])&&t.classList.add("is-selected"))}onChange(){this.setActiveDot()}onRefresh(){this.rebuildDots()}attach(){this.carousel.on(this.events)}detach(){this.removeList(),this.carousel.off(this.events),this.carousel=null}},Sync:Wt};const Ut={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,prefix:"",classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};class Yt extends Vt{constructor(t,e={}){if(super(e=P(!0,{},Ut,e)),this.state="init",this.$container=t,!(this.$container instanceof HTMLElement))throw new Error("No root element provided");this.slideNext=qt(this.slideNext.bind(this),250),this.slidePrev=qt(this.slidePrev.bind(this),250),this.init(),t.__Carousel=this}init(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(Yt.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track&&this.pages.length&&(this.$track.style.transform=`translate3d(${-1*this.pages[this.page].left}px, 0px, 0) scale(1)`),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}initLayout(){var t=this.option("prefix"),e=this.option("classNames");this.$viewport=this.option("viewport")||this.$container.querySelector("."+t+e.viewport),this.$viewport||(this.$viewport=document.createElement("div"),this.$viewport.classList.add(...(t+e.viewport).split(" ")),this.$viewport.append(...this.$container.childNodes),this.$container.appendChild(this.$viewport)),this.$track=this.option("track")||this.$container.querySelector("."+t+e.track),this.$track||(this.$track=document.createElement("div"),this.$track.classList.add(...(t+e.track).split(" ")),this.$track.append(...this.$viewport.childNodes),this.$viewport.appendChild(this.$track))}initSlides(){this.slides=[],this.$viewport.querySelectorAll("."+this.option("prefix")+this.option("classNames.slide")).forEach(t=>{t={$el:t,isDom:!0};this.slides.push(t),this.trigger("createSlide",t,this.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=P(!0,[...this.slides],this.options.slides))}updateMetrics(){let s,n=0,o=[],a=(this.slides.forEach((t,e)=>{var i=t.$el,i=t.isDom||!s?this.getSlideMetrics(i):s;t.index=e,t.width=i,t.left=n,s=i,n+=i,o.push(e)}),Math.max(this.$track.offsetWidth,T(this.$track.getBoundingClientRect().width))),t=getComputedStyle(this.$track);a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),this.contentWidth=n,this.viewportWidth=a;var r=[],e=this.option("slidesPerPage");if(Number.isInteger(e)&&n>a)for(let t=0;t<this.slides.length;t+=e)r.push({indexes:o.slice(t,t+e),slides:this.slides.slice(t,t+e)});else{let e=0,i=0;for(let t=0;t<this.slides.length;t+=1){var l=this.slides[t];(!r.length||i+l.width>a)&&(r.push({indexes:[],slides:[]}),e=r.length-1,i=0),i+=l.width,r[e].indexes.push(t),r[e].slides.push(l)}}const i=this.option("center"),h=this.option("fill"),u=(r.forEach((t,e)=>{t.index=e,t.width=t.slides.reduce((t,e)=>t+e.width,0),t.left=t.slides[0].left,i&&(t.left+=.5*(a-t.width)*-1),h&&!this.option("infiniteX",this.option("infinite"))&&n>a&&(t.left=Math.max(t.left,0),t.left=Math.min(t.left,n-a))}),[]);let c,d=(r.forEach(t=>{t={...t};c&&t.left===c.left?(c.width+=t.width,c.slides=[...c.slides,...t.slides],c.indexes=[...c.indexes,...t.indexes]):(t.index=u.length,c=t,u.push(t))}),this.pages=u,this.page);if(null===d){const s=this.option("initialSlide");d=null!==s?this.findPageForSlide(s):parseInt(this.option("initialPage",0),10)||0,u[d]||(d=u.length&&d>u.length?u[u.length-1].index:0),this.page=d,this.pageIndex=d}this.updatePanzoom(),this.trigger("refresh")}getSlideMetrics(t){if(!t){const e=this.slides[0];(t=document.createElement("div")).dataset.isTestEl=1,t.style.visibility="hidden",t.classList.add(...(this.option("prefix")+this.option("classNames.slide")).split(" ")),e.customClass&&t.classList.add(...e.customClass.split(" ")),this.$track.prepend(t)}let e=Math.max(t.offsetWidth,T(t.getBoundingClientRect().width));var i=t.currentStyle||window.getComputedStyle(t);return e=e+(parseFloat(i.marginLeft)||0)+(parseFloat(i.marginRight)||0),t.dataset.isTestEl&&t.remove(),e}findPageForSlide(e){e=parseInt(e,10)||0;var t=this.pages.find(t=>-1<t.indexes.indexOf(e));return t?t.index:null}slideNext(){this.slideTo(this.pageIndex+1)}slidePrev(){this.slideTo(this.pageIndex-1)}slideTo(t,e={}){var{x:e=-1*this.setPage(t,!0),y:t=0,friction:i=this.option("friction")}=e;this.Panzoom.content.x===e&&!this.Panzoom.velocity.x&&i||(this.Panzoom.panTo({x:e,y:t,friction:i,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}initPanzoom(){this.Panzoom&&this.Panzoom.destroy();var t=P(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:this.pages.length?-1*this.pages[this.page].left:0,centerOnStart:!1,textSelection:()=>this.option("textSelection",!1),panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom"));this.Panzoom=new Nt(this.$container,t),this.Panzoom.on({"*":(t,...e)=>this.trigger("Panzoom."+t,...e),afterUpdate:()=>{this.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:()=>{this.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}updatePanzoom(){this.Panzoom&&(this.Panzoom.content={...this.Panzoom.content,fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth},1<this.pages.length&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.pages.length&&(this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left}),this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}manageSlideVisiblity(){const r=this.contentWidth,l=this.viewportWidth;let h=this.Panzoom?-1*this.Panzoom.content.x:this.pages.length?this.pages[this.page].left:0;const u=this.option("preload"),c=this.option("infiniteX",this.option("infinite")),d=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),f=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-right"));this.slides.forEach(t=>{let e,i,s=0;e=h-d,i=h+l+f,e-=u*(l+d+f),i+=u*(l+d+f);var n=t.left+t.width>e&&t.left<i,o=(e=h+r-d,i=h+r+l+f,e-=u*(l+d+f),c&&t.left+t.width>e&&t.left<i),a=(e=h-r-d,i=h-r+l+f,e-=u*(l+d+f),c&&t.left+t.width>e&&t.left<i);o||n||a?(this.createSlideEl(t),n&&(s=0),o&&(s=-1),a&&(s=1),t.left+t.width>h&&t.left<=h+l+f&&(s=0)):this.removeSlideEl(t),t.hasDiff=s});let s=0,n=0;this.slides.forEach((t,e)=>{let i=0;t.$el?(e!==s||t.hasDiff?i=n+t.hasDiff*r:n=0,t.$el.style.left=.1<Math.abs(i)?n+t.hasDiff*r+"px":"",s++):n+=t.width}),this.markSelectedSlides()}createSlideEl(e){if(e){if(!e.$el){var i,s=document.createElement("div");s.dataset.index=e.index,s.classList.add(...(this.option("prefix")+this.option("classNames.slide")).split(" ")),e.customClass&&s.classList.add(...e.customClass.split(" ")),e.html&&(s.innerHTML=e.html);const n=[],o=(this.slides.forEach((t,e)=>{t.$el&&n.push(e)}),e.index);let t=null;return n.length&&(i=n.reduce((t,e)=>Math.abs(e-o)<Math.abs(t-o)?e:t),t=this.slides[i]),this.$track.insertBefore(s,t&&t.$el?t.index<e.index?t.$el.nextSibling:t.$el:null),e.$el=s,this.trigger("createSlide",e,o),e}(i=e.$el.dataset.index)&&parseInt(i,10)===e.index||(e.$el.dataset.index=e.index,e.$el.querySelectorAll("[data-lazy-srcset]").forEach(t=>{t.srcset=t.dataset.lazySrcset}),e.$el.querySelectorAll("[data-lazy-src]").forEach(t=>{var e=t.dataset.lazySrc;t instanceof HTMLImageElement?t.src=e:t.style.backgroundImage=`url('${e}')`}),(s=e.$el.dataset.lazySrc)&&(e.$el.style.backgroundImage=`url('${s}')`),e.state="ready")}}removeSlideEl(t){t.$el&&!t.isDom&&(this.trigger("removeSlide",t),t.$el.remove(),t.$el=null)}markSelectedSlides(){const n=this.option("classNames.slideSelected"),o="aria-hidden";this.slides.forEach((t,e)=>{var i,s=t.$el;s&&((i=this.pages[this.page])&&i.indexes&&-1<i.indexes.indexOf(e)?(n&&!s.classList.contains(n)&&(s.classList.add(n),this.trigger("selectSlide",t)),s.removeAttribute(o)):(n&&s.classList.contains(n)&&(s.classList.remove(n),this.trigger("unselectSlide",t)),s.setAttribute(o,!0)))})}updatePage(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}onBeforeTransform(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}manageInfiniteTrack(){var e=this.contentWidth,i=this.viewportWidth;if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||e<i)){var s=this.Panzoom;let t=!1;return s.content.x<-1*(e-i)&&(s.content.x+=e,this.pageIndex=this.pageIndex-this.pages.length,t=!0),s.content.x>i&&(s.content.x-=e,this.pageIndex=this.pageIndex+this.pages.length,t=!0),t&&"pointerdown"===s.state&&s.resetDragPosition(),t}}onTouchEnd(t,e){var i=this.option("dragFree");if(!i&&1<this.pages.length&&t.dragOffset.time<350&&Math.abs(t.dragOffset.y)<1&&5<Math.abs(t.dragOffset.x))this[t.dragOffset.x<0?"slideNext":"slidePrev"]();else if(i){const[,e]=this.getPageFromPosition(-1*t.transform.x);this.setPage(e)}else this.slideToClosest()}slideToClosest(t={}){var[,e]=this.getPageFromPosition(-1*this.Panzoom.content.x);this.slideTo(e,t)}getPageFromPosition(e){var t=this.pages.length,i=(this.option("center")&&(e+=.5*this.viewportWidth),Math.floor(e/this.contentWidth)),s=(e-=i*this.contentWidth,this.slides.find(t=>t.left<=e&&t.left+t.width>e));return s?[s=this.findPageForSlide(s.index),s+i*t]:[0,0]}setPage(t,e){let i=0,s=parseInt(t,10)||0;const n=this.page,o=this.pageIndex,a=this.pages.length,r=this.contentWidth,l=this.viewportWidth;if(t=(s%a+a)%a,this.option("infiniteX",this.option("infinite"))&&r>l){const n=Math.floor(s/a)||0,o=r;if(i=this.pages[t].left+n*o,!0===e&&2<a){var h=-1*this.Panzoom.content.x;const e=i-o,n=i+o,r=Math.abs(h-i),l=Math.abs(h-e),u=Math.abs(h-n);u<r&&u<=l?(i=n,s+=a):l<r&&l<u&&(i=e,s-=a)}}else t=s=Math.max(0,Math.min(s,a-1)),i=this.pages.length?this.pages[t].left:0;return this.page=t,this.pageIndex=s,null!==n&&t!==n&&(this.prevPage=n,this.prevPageIndex=o,this.trigger("change",t,n)),i}destroy(){this.state="destroy",this.slides.forEach(t=>{this.removeSlideEl(t)}),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}}Yt.version="4.0.31",Yt.Plugins=r;const Xt=!("undefined"==typeof window||!window.document||!window.document.createElement);let Gt=null;const Zt=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'],Kt=t=>{if(t&&Xt){null===Gt&&document.createElement("div").focus({get preventScroll(){return!(Gt=!0)}});try{var e,i;t.setActive?t.setActive():Gt?t.focus({preventScroll:!0}):(e=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft,t.focus(),document.body.scrollTo({top:e,left:i,behavior:"auto"}))}catch(t){}}};class Jt{constructor(t){this.fancybox=t,this.$container=null,this.state="init";for(const t of["onPrepare","onClosing","onKeydown"])this[t]=this[t].bind(this);this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}onPrepare(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}onClosing(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}onKeydown(t,e){e===t.option("Thumbs.key")&&this.toggle()}build(){var t;this.$container||((t=document.createElement("div")).classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(t,this.fancybox.$carousel.nextSibling),this.Carousel=new Yt(t,P(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",(t,e)=>{e.preventDefault(),this.fancybox[e.deltaY<0?"prev":"next"]()}),this.$container=t,this.state="visible")}getSlides(){var t=[];for(const i of this.fancybox.items){var e=i.thumb;e&&t.push({html:this.fancybox.option("Thumbs.tpl").replace(/\{\{src\}\}/gi,e),customClass:"has-thumb has-"+(i.type||"image")})}return t}toggle(){"visible"===this.state?this.hide():"hidden"===this.state?this.show():this.build()}show(){"hidden"===this.state&&(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),this.state="visible")}hide(){"visible"===this.state&&(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",this.state="hidden")}cleanup(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events),this.cleanup()}}Jt.defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t",Carousel:{},tpl:'<div class="fancybox__thumb" style="background-image:url(\'{{src}}\')"></div>'};const Qt=(t,e)=>{const i=new URL(t),s=new URLSearchParams(i.search);let n=new URLSearchParams;for(const[t,i]of[...s,...Object.entries(e)])"t"===t?n.set("start",parseInt(i)):n.set(t,i);n=n.toString();e=t.match(/#t=((.*)?\d+s)/);return e&&(n+="#t="+e[1]),n},te={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',format:""}};class ee{constructor(t){this.fancybox=t;for(const t of["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"])this[t]=this[t].bind(this);this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}onInit(){for(const t of this.fancybox.items)this.processType(t)}processType(i){if(i.html)i.src=i.html,i.type="html",delete i.html;else{var s=i.src||"";let t=i.type||this.fancybox.options.type,e=null;if(!s||"string"==typeof s){if(e=s.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const P=Qt(s,this.fancybox.option("Html.youtube")),n=encodeURIComponent(e[1]);i.videoId=n,i.src=`https://www.youtube-nocookie.com/embed/${n}?`+P,i.thumb=i.thumb||`https://i.ytimg.com/vi/${n}/mqdefault.jpg`,i.vendor="youtube",t="video"}else if(e=s.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/)){const P=Qt(s,this.fancybox.option("Html.vimeo")),o=encodeURIComponent(e[1]);i.videoId=o,i.src=`https://player.vimeo.com/video/${o}?`+P,i.vendor="vimeo",t="video"}else(e=s.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(i.src=`//maps.google.${e[1]}/?ll=${(e[2]?e[2]+"&z="+Math.floor(e[3])+(e[4]?e[4].replace(/^\//,"&"):""):e[4]+"").replace(/\?/,"&")}&output=`+(e[4]&&0<e[4].indexOf("layer=c")?"svembed":"embed"),t="map"):(e=s.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(i.src=`//maps.google.${e[1]}/maps?q=${e[2].replace("query=","q=").replace("api=1","")}&output=embed`,t="map");t||("#"===s.charAt(0)?t="inline":(e=s.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(t="html5video",i.format=i.format||"video/"+("ogv"===e[1]?"ogg":e[1])):s.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?t="image":s.match(/\.(pdf)((\?|#).*)?$/i)&&(t="pdf")),i.type=t||this.fancybox.option("defaultType","image"),"html5video"!==t&&"video"!==t||(i.video=P({},this.fancybox.option("Html.video"),i.video),i._width&&i._height?i.ratio=parseFloat(i._width)/parseFloat(i._height):i.ratio=i.ratio||i.video.ratio||te.video.ratio)}}}onReady(){this.fancybox.Carousel.slides.forEach(t=>{t.$el&&(this.setContent(t),t.index===this.fancybox.getSlide().index&&this.playVideo(t))})}onCreateSlide(t,e,i){"ready"===this.fancybox.state&&this.setContent(i)}loadInlineContent(t){let e;if(t.src instanceof HTMLElement?e=t.src:"string"==typeof t.src&&(i=2===(i=t.src.split("#",2)).length&&""===i[0]?i[1]:i[0],e=document.getElementById(i)),e){if("clone"===t.type||e.$placeHolder){var i=(i=(e=e.cloneNode(!0)).getAttribute("id"))?i+"--clone":`clone-${this.fancybox.id}-`+t.index;e.setAttribute("id",i)}else{const t=document.createElement("div");t.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(t,e),e.$placeHolder=t}this.fancybox.setContent(t,e)}else this.fancybox.setError(t,"{{ELEMENT_NOT_FOUND}}")}loadAjaxContent(t){const e=this.fancybox,i=new XMLHttpRequest;e.showLoading(t),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&"ready"===e.state&&(e.hideLoading(t),200===i.status?e.setContent(t,i.responseText):e.setError(t,404===i.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};var s=t.ajax||null;i.open(s?"POST":"GET",t.src),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(s),t.xhr=i}loadIframeContent(e){const i=this.fancybox,s=document.createElement("iframe");var t;s.className="fancybox__iframe",s.setAttribute("id",`fancybox__iframe_${i.id}_`+e.index),s.setAttribute("allow","autoplay; fullscreen"),s.setAttribute("scrolling","auto"),e.$iframe=s,"iframe"!==e.type||!1===e.preload?(s.setAttribute("src",e.src),this.fancybox.setContent(e,s),this.resizeIframe(e)):(i.showLoading(e),(t=document.createElement("div")).style.visibility="hidden",this.fancybox.setContent(e,t),t.appendChild(s),s.onerror=()=>{i.setError(e,"{{IFRAME_ERROR}}")},s.onload=()=>{i.hideLoading(e);let t=!1;s.isReady||(s.isReady=!0,t=!0),s.src.length&&(s.parentNode.style.visibility="",this.resizeIframe(e),t&&i.revealContent(e))},s.setAttribute("src",e.src))}setAspectRatio(i){var s,n=i.$content,o=i.ratio;if(n){let t=i._width,e=i._height;(o||t&&e)&&(Object.assign(n.style,{width:t&&e?"100%":"",height:t&&e?"100%":"",maxWidth:"",maxHeight:""}),i=n.offsetWidth,s=n.offsetHeight,t=t||i,e=e||s,(t>i||e>s)&&(i=Math.min(i/t,s/e),t*=i,e*=i),.01<Math.abs(t/e-o)&&(o<t/e?t=e*o:e=t/o),Object.assign(n.style,{width:t+"px",height:e+"px"}))}}resizeIframe(i){var s=i.$iframe;if(s){let t=i._width||0,e=i._height||0;t&&e&&(i.autoSize=!1);var n=s.parentNode,o=n&&n.style;if(!1!==i.preload&&!1!==i.autoSize&&o)try{const i=window.getComputedStyle(n),a=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),l=s.contentWindow.document,h=l.getElementsByTagName("html")[0],u=l.body;o.width="",u.style.overflow="hidden",t=t||h.scrollWidth+a,o.width=t+"px",u.style.overflow="",o.flex="0 0 auto",o.height=u.scrollHeight+"px",e=h.scrollHeight+r}catch(i){}if(t||e){const i={flex:"0 1 auto"};t&&(i.width=t+"px"),e&&(i.height=e+"px"),Object.assign(o,i)}}}onRefresh(t,e){e.slides.forEach(t=>{t.$el&&(t.$iframe&&this.resizeIframe(t),t.ratio&&this.setAspectRatio(t))})}setContent(t){if(t&&!t.isDom){switch(t.type){case"html":this.fancybox.setContent(t,t.src);break;case"html5video":this.fancybox.setContent(t,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.format||t.html5video&&t.html5video.format||"").replace("{{poster}}",t.poster||t.thumb||""));break;case"inline":case"clone":this.loadInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case"video":case"map":t.preload=!1;case"iframe":this.loadIframeContent(t)}t.ratio&&this.setAspectRatio(t)}}onSelectSlide(t,e,i){"ready"===t.state&&this.playVideo(i)}playVideo(e){if("html5video"===e.type&&e.video.autoplay)try{const i=e.$el.querySelector("video");if(i){const e=i.play();void 0!==e&&e.then(()=>{}).catch(t=>{i.muted=!0,i.play()})}}catch(e){}if("video"===e.type&&e.$iframe&&e.$iframe.contentWindow){const i=()=>{if("done"===e.state&&e.$iframe&&e.$iframe.contentWindow){let t;if(e.$iframe.isReady)return void((t=e.video&&e.video.autoplay?"youtube"==e.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}:t)&&e.$iframe.contentWindow.postMessage(JSON.stringify(t),"*"));"youtube"===e.vendor&&(t={event:"listening",id:e.$iframe.getAttribute("id")},e.$iframe.contentWindow.postMessage(JSON.stringify(t),"*"))}e.poller=setTimeout(i,250)};i()}}onUnselectSlide(t,e,i){if("html5video"===i.type)try{i.$el.querySelector("video").pause()}catch(t){}else{let t=!1;"vimeo"==i.vendor?t={method:"pause",value:"true"}:"youtube"===i.vendor&&(t={event:"command",func:"pauseVideo"}),t&&i.$iframe&&i.$iframe.contentWindow&&i.$iframe.contentWindow.postMessage(JSON.stringify(t),"*"),clearTimeout(i.poller)}}onRemoveSlide(t,e,i){i.xhr&&(i.xhr.abort(),i.xhr=null),i.$iframe&&(i.$iframe.onload=i.$iframe.onerror=null,i.$iframe.src="//about:blank",i.$iframe=null);var s=i.$content,i=("inline"===i.type&&s&&(s.classList.remove("fancybox__content"),"none"!==s.style.display&&(s.style.display="none")),i.$closeButton&&(i.$closeButton.remove(),i.$closeButton=null),s&&s.$placeHolder);i&&(i.parentNode.insertBefore(s,i),i.remove(),s.$placeHolder=null)}onMessage(t){try{var e=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===e.event)for(var i of document.getElementsByClassName("fancybox__iframe"))i.contentWindow===t.source&&(i.isReady=1)}else"https://www.youtube-nocookie.com"===t.origin&&"onReady"===e.event&&(document.getElementById(e.id).isReady=1)}catch(t){}}attach(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}detach(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}ee.defaults=te;class ie{constructor(t){this.fancybox=t;for(const t of["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"])this[t]=this[t].bind(this);this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}onReady(){this.fancybox.Carousel.slides.forEach(t=>{t.$el&&this.setContent(t)})}onDone(t,e){this.handleCursor(e)}onClosing(t){clearTimeout(this.clickTimer),this.clickTimer=null,t.Carousel.slides.forEach(t=>{t.$image&&(t.state="destroy"),t.Panzoom&&t.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(t.getSlide())&&this.zoomOut()}onCreateSlide(t,e,i){"ready"===this.fancybox.state&&this.setContent(i)}onRemoveSlide(t,e,i){i.$image&&(i.$el.classList.remove(t.option("Image.canZoomInClass")),i.$image.remove(),i.$image=null),i.Panzoom&&(i.Panzoom.destroy(),i.Panzoom=null),i.$el&&i.$el.dataset&&delete i.$el.dataset.imageFit}setContent(e){var t,i,s,n;e.isDom||e.html||e.type&&"image"!==e.type||e.$image||(e.type="image",e.state="loading",(t=document.createElement("div")).style.visibility="hidden",(i=document.createElement("img")).addEventListener("load",t=>{t.stopImmediatePropagation(),this.onImageStatusChange(e)}),i.addEventListener("error",()=>{this.onImageStatusChange(e)}),i.src=e.src,i.alt="",i.draggable=!1,i.classList.add("fancybox__image"),e.srcset&&i.setAttribute("srcset",e.srcset),e.sizes&&i.setAttribute("sizes",e.sizes),e.$image=i,(s=this.fancybox.option("Image.wrap"))?((n=document.createElement("div")).classList.add("string"==typeof s?s:"fancybox__image-wrap"),n.appendChild(i),t.appendChild(n),e.$wrap=n):t.appendChild(i),e.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(e,t),i.complete||i.error?this.onImageStatusChange(e):this.fancybox.showLoading(e))}onImageStatusChange(e){var t=e.$image;t&&"loading"===e.state&&(t.complete&&t.naturalWidth&&t.naturalHeight?(this.fancybox.hideLoading(e),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(e),e.$el.addEventListener("wheel",t=>this.onWheel(e,t),{passive:!1}),e.$content.addEventListener("click",t=>this.onClick(e,t),{passive:!1}),this.revealContent(e)):this.fancybox.setError(e,"{{IMAGE_ERROR}}"))}initSlidePanzoom(t){t.Panzoom||(t.Panzoom=new Nt(t.$el,P(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:t.$wrap,content:t.$image,width:t._width,height:t._height,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),t.Panzoom.on("startAnimation",()=>{this.fancybox.trigger("Image.startAnimation",t)}),t.Panzoom.on("endAnimation",()=>{"zoomIn"===t.state&&this.fancybox.done(t),this.handleCursor(t),this.fancybox.trigger("Image.endAnimation",t)}),t.Panzoom.on("afterUpdate",()=>{this.handleCursor(t),this.fancybox.trigger("Image.afterUpdate",t)}))}revealContent(t){null===this.fancybox.Carousel.prevPage&&t.index===this.fancybox.options.startIndex&&this.canZoom(t)?this.zoomIn():this.fancybox.revealContent(t)}getZoomInfo(t){var e=t.$thumb.getBoundingClientRect(),i=e.width,s=e.height,t=t.$content.getBoundingClientRect(),n=t.width,o=t.height,a=t.top-e.top,t=t.left-e.left;let r=this.fancybox.option("Image.zoomOpacity");return{top:a,left:t,scale:n&&i?i/n:1,opacity:r="auto"===r?.1<Math.abs(i/s-n/o):r}}canZoom(t){const e=this.fancybox,i=e.$container;if(window.visualViewport&&1!==window.visualViewport.scale)return!1;if(t.Panzoom&&!t.Panzoom.content.width)return!1;if(!e.option("Image.zoom")||"contain"!==e.option("Image.fit"))return!1;var s=t.$thumb;if(!s||"loading"===t.state)return!1;i.classList.add("fancybox__no-click");var n=s.getBoundingClientRect();let o;if(this.fancybox.option("Image.ignoreCoveredThumbnail")){const t=document.elementFromPoint(n.left+1,n.top+1)===s,e=document.elementFromPoint(n.right-1,n.bottom-1)===s;o=t&&e}else o=document.elementFromPoint(n.left+.5*n.width,n.top+.5*n.height)===s;return i.classList.remove("fancybox__no-click"),o}zoomIn(){const t=this.fancybox,e=t.getSlide(),i=e.Panzoom,{top:s,left:n,scale:o,opacity:a}=this.getZoomInfo(e);t.trigger("reveal",e),i.panTo({x:-1*n,y:-1*s,scale:o,friction:0,ignoreBounds:!0}),e.$content.style.visibility="",e.state="zoomIn",!0===a&&i.on("afterTransform",t=>{"zoomIn"!==e.state&&"zoomOut"!==e.state||(t.$content.style.opacity=Math.min(1,1-(1-t.content.scale)/(1-o)))}),i.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}zoomOut(){const t=this.fancybox,a=t.getSlide(),r=a.Panzoom;if(r){a.state="zoomOut",t.state="customClosing",a.$caption&&(a.$caption.style.visibility="hidden");let o=this.fancybox.option("Image.zoomFriction");const e=t=>{var{top:e,left:i,scale:s,opacity:n}=this.getZoomInfo(a);t||n||(o*=.82),r.panTo({x:-1*i,y:-1*e,scale:s,friction:o,ignoreBounds:!0}),o*=.98};window.addEventListener("scroll",e),r.once("endAnimation",()=>{window.removeEventListener("scroll",e),t.destroy()}),e()}}handleCursor(t){var e,i,s,n,o;"image"===t.type&&t.$el&&(e=t.Panzoom,i=this.fancybox.option("Image.click",!1,t),s=this.fancybox.option("Image.touch"),t=t.$el.classList,n=this.fancybox.option("Image.canZoomInClass"),o=this.fancybox.option("Image.canZoomOutClass"),t.remove(o),t.remove(n),e&&"toggleZoom"===i?e&&1===e.content.scale&&.01<e.option("maxScale")-e.content.scale?t.add(n):1<e.content.scale&&!s&&t.add(o):"close"===i&&t.add(o))}onWheel(t,e){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",e))switch(this.fancybox.option("Image.wheel")){case"zoom":"done"===t.state&&t.Panzoom&&t.Panzoom.zoomWithWheel(e);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[e.deltaY<0?"prev":"next"]()}}onClick(e,i){if("ready"===this.fancybox.state){var t=e.Panzoom;if(!t||!t.dragPosition.midPoint&&0===t.dragOffset.x&&0===t.dragOffset.y&&1===t.dragOffset.scale){if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;const s=t=>{switch(t){case"toggleZoom":i.stopPropagation(),e.Panzoom&&e.Panzoom.zoomWithClick(i);break;case"close":this.fancybox.close();break;case"next":i.stopPropagation(),this.fancybox.next()}},n=this.fancybox.option("Image.click"),o=this.fancybox.option("Image.doubleClick");o?this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null,s(o)):this.clickTimer=setTimeout(()=>{this.clickTimer=null,s(n)},300):s(n)}}}onPageChange(t,e){const i=t.getSlide();e.slides.forEach(t=>{t.Panzoom&&"done"===t.state&&t.index!==i.index&&t.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})})}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events)}}ie.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}};class I{constructor(t){this.fancybox=t;for(const t of["onChange","onClosing"])this[t]=this[t].bind(this);this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}onChange(t){var e=t.Carousel;this.timer&&clearTimeout(this.timer);const i=null===e.prevPage,s=t.getSlide(),n=new URL(document.URL).hash;let o=!1;if(s.slug)o="#"+s.slug;else{const i=s.$trigger&&s.$trigger.dataset,n=t.option("slug")||i&&i.fancybox;n&&n.length&&"true"!==n&&(o="#"+n+(1<e.slides.length?"-"+(s.index+1):""))}i&&(this.origHash=n!==o?n:""),o&&n!==o&&(this.timer=setTimeout(()=>{try{window.history[i?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+o),i&&(this.hasCreatedHistory=!0)}catch(t){}},300))}onClosing(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(t){}}attach(t){t.on(this.events)}detach(t){t.off(this.events)}static startFromUrl(){var e=I.Fancybox;if(e&&!e.getInstance()&&!1!==e.defaults.Hash){var{hash:i,slug:s,index:n}=I.getParsedURL();if(s){let t=document.querySelector(`[data-slug="${i}"]`);t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),e.getInstance()||(i=document.querySelectorAll(`[data-fancybox="${s}"]`)).length&&(null===n&&1===i.length?t=i[0]:n&&(t=i[n-1]),t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}}}static onHashChange(){const{slug:t,index:e}=I.getParsedURL(),i=I.Fancybox,s=i&&i.getInstance();if(s&&s.plugins.Hash){if(t){const i=s.Carousel;if(t===s.option("slug"))return i.slideTo(e-1);for(var n of i.slides)if(n.slug&&n.slug===t)return i.slideTo(n.index);var o=s.getSlide(),o=o.$trigger&&o.$trigger.dataset;if(o&&o.fancybox===t)return i.slideTo(e-1)}s.plugins.Hash.hasSilentClose=!0,s.close()}I.startFromUrl()}static create(t){function e(){window.addEventListener("hashchange",I.onHashChange,!1),I.startFromUrl()}I.Fancybox=t,Xt&&window.requestAnimationFrame(()=>{/complete|interactive|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)})}static destroy(){window.removeEventListener("hashchange",I.onHashChange,!1)}static getParsedURL(){var t=window.location.hash.substr(1),e=t.split("-"),i=1<e.length&&/^\+?\d+$/.test(e[e.length-1])&&parseInt(e.pop(-1),10)||null;return{hash:t,slug:e.join("-"),index:i}}}const B={pageXOffset:0,pageYOffset:0,element:()=>document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,activate(t){B.pageXOffset=window.pageXOffset,B.pageYOffset=window.pageYOffset,t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},deactivate(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class se{constructor(t){this.fancybox=t,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}isActive(){return this.active}setTimer(){if(this.active&&!this.timer){var e=this.fancybox.option("slideshow.delay",3e3);this.timer=setTimeout(()=>{this.timer=null,this.fancybox.option("infinite")||this.fancybox.getSlide().index!==this.fancybox.Carousel.slides.length-1?this.fancybox.next():this.fancybox.jumpTo(0,{friction:0})},e);let t=this.$progress;t||((t=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(t,this.fancybox.$carousel),(this.$progress=t).offsetHeight),t.style.transitionDuration=e+"ms",t.style.transform="scaleX(1)"}}clearTimer(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}activate(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}handleVisibilityChange(){this.deactivate()}deactivate(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}toggle(){this.active?this.deactivate():1<this.fancybox.Carousel.slides.length&&this.activate()}}class ne{constructor(t){this.fancybox=t,this.$container=null,this.state="init";for(const t of["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"])this[t]=this[t].bind(this);this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":()=>this.onRefresh(),"Image.startAnimation":(t,e)=>this.onRefresh(e),"Image.afterUpdate":(t,e)=>this.onRefresh(e)}}onInit(){if(this.fancybox.option("Toolbar.autoEnable")){let t=!1;for(const e of this.fancybox.items)if("image"===e.type){t=!0;break}if(!t)return void(this.state="disabled")}for(const t of this.fancybox.option("Toolbar.display"))if("close"===(L(t)?t.id:t)){this.fancybox.options.closeButton=!1;break}}onPrepare(){var t=this.fancybox;if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new se(t),!t.Carousel.prevPage&&(t.option("slideshow.autoStart")&&this.Slideshow.activate(),t.option("fullscreen.autoStart")&&!B.element())))try{B.activate(t.$container)}catch(t){}}onFsChange(){window.scrollTo(B.pageXOffset,B.pageYOffset)}onSettle(){var t=this.fancybox,e=this.Slideshow;e&&e.isActive()&&(t.getSlide().index!==t.Carousel.slides.length-1||t.option("infinite")?"done"===t.getSlide().state&&e.setTimer():e.deactivate())}onChange(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}onDone(t,e){var i=this.Slideshow;e.index===t.getSlide().index&&(this.update(),i&&i.isActive()&&(t.option("infinite")||e.index!==t.Carousel.slides.length-1?i.setTimer():i.deactivate()))}onRefresh(t){t&&t.index!==this.fancybox.getSlide().index||(this.update(),!this.Slideshow||!this.Slideshow.isActive()||t&&"done"!==t.state||this.Slideshow.deactivate())}onKeydown(t,e,i){" "===e&&this.Slideshow&&(this.Slideshow.toggle(),i.preventDefault())}onClosing(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}createElement(t){let e;"div"===t.type?e=document.createElement("div"):(e=document.createElement("link"===t.type?"a":"button")).classList.add("carousel__button"),e.innerHTML=t.html,e.setAttribute("tabindex",t.tabindex||0),t.class&&e.classList.add(...t.class.split(" "));for(const i in t.attr)e.setAttribute(i,t.attr[i]);t.label&&e.setAttribute("title",this.fancybox.localize(`{{${t.label}}}`)),t.click&&e.addEventListener("click",t.click.bind(this)),"prev"===t.id&&e.setAttribute("data-fancybox-prev",""),"next"===t.id&&e.setAttribute("data-fancybox-next","");const i=e.querySelector("svg");return i&&(i.setAttribute("role","img"),i.setAttribute("tabindex","-1"),i.setAttribute("xmlns","http://www.w3.org/2000/svg")),e}build(){this.cleanup();const e=this.fancybox.option("Toolbar.items"),s=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],n=this.fancybox.plugins.Thumbs;for(const o of this.fancybox.option("Toolbar.display")){let t,i;if(i=L(o)?(t=o.id,P({},e[t],o)):(t=o,e[t]),!(["counter","next","prev","slideshow"].includes(t)&&this.fancybox.items.length<2)){if("fullscreen"===t){if(!document.fullscreenEnabled||window.fullScreen)continue;document.addEventListener("fullscreenchange",this.onFsChange)}if(("thumbs"!==t||n&&"disabled"!==n.state)&&i){let e=i.position||"right",t=s.find(t=>t.position===e);t&&t.items.push(i)}}}const o=document.createElement("div");o.classList.add("fancybox__toolbar");for(const L of s)if(L.items.length){const P=document.createElement("div");P.classList.add("fancybox__toolbar__items"),P.classList.add("fancybox__toolbar__items--"+L.position);for(const e of L.items)P.appendChild(this.createElement(e));o.appendChild(P)}this.fancybox.$carousel.parentNode.insertBefore(o,this.fancybox.$carousel),this.$container=o}update(){const t=this.fancybox.getSlide(),e=t.index,i=this.fancybox.items.length,s=t.downloadSrc||("image"!==t.type||t.error?null:t.src);for(const t of this.fancybox.$container.querySelectorAll("a.fancybox__button--download"))s?(t.removeAttribute("disabled"),t.removeAttribute("tabindex"),t.setAttribute("href",s),t.setAttribute("download",s),t.setAttribute("target","_blank")):(t.setAttribute("disabled",""),t.setAttribute("tabindex",-1),t.removeAttribute("href"),t.removeAttribute("download"));var n=t.Panzoom,o=n&&n.option("maxScale")>n.option("baseScale");for(const t of this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"))o?t.removeAttribute("disabled"):t.setAttribute("disabled","");for(const e of this.fancybox.$container.querySelectorAll("[data-fancybox-index]"))e.innerHTML=t.index+1;for(const t of this.fancybox.$container.querySelectorAll("[data-fancybox-count]"))t.innerHTML=i;if(!this.fancybox.option("infinite")){for(const t of this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"))0===e?t.setAttribute("disabled",""):t.removeAttribute("disabled");for(const t of this.fancybox.$container.querySelectorAll("[data-fancybox-next]"))e===i-1?t.setAttribute("disabled",""):t.removeAttribute("disabled")}}cleanup(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events),this.cleanup()}}ne.defaults={display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0,items:{counter:{position:"left",type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',attr:{tabindex:-1}},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg viewBox="0 0 24 24"><path d="M15 4l-8 8 8 8"/></svg>',attr:{"data-fancybox-prev":""}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg viewBox="0 0 24 24"><path d="M8 4l8 8-8 8"/></svg>',attr:{"data-fancybox-next":""}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(t){t.preventDefault(),B.element()?B.deactivate():B.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(t){t.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg viewBox="0 0 24 24"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(t){t.preventDefault();t=this.fancybox.getSlide().Panzoom;t&&t.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg viewBox="0 0 24 24"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(t){t.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg viewBox="0 0 24 24"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(t){t.stopPropagation();t=this.fancybox.plugins.Thumbs;t&&t.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg viewBox="0 0 24 24"><path d="M20 20L4 4m16 0L4 20"></path></svg>',attr:{"data-fancybox-close":"",tabindex:0}}}};t={ScrollLock:class{constructor(t){this.fancybox=t,this.viewport=null,this.pendingUpdate=null;for(const t of["onReady","onResize","onTouchstart","onTouchmove"])this[t]=this[t].bind(this)}onReady(){var t=window.visualViewport;t&&(this.viewport=t,this.startY=0,t.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1}),window.addEventListener("wheel",this.onWheel,{passive:!1})}onResize(){this.updateViewport()}updateViewport(){var s=this.fancybox,n=this.viewport,o=n.scale||1,s=s.$container;if(s){let t="",e="",i="";.1<o-1&&(t=n.width*o+"px",e=n.height*o+"px",i=`translate3d(${n.offsetLeft}px, ${n.offsetTop}px, 0) scale(${1/o})`),s.style.width=t,s.style.height=e,s.style.transform=i}}onTouchstart(t){this.startY=(t.touches?t.touches[0]:t).screenY}onTouchmove(t){var e,i,s,n=this.startY,o=window.innerWidth/window.document.documentElement.clientWidth;!t.cancelable||1<t.touches.length||1!=o||(o=Bt(t.composedPath()[0]))&&(e=window.getComputedStyle(o),e=parseInt(e.getPropertyValue("height"),10),i=n<=(s=(t.touches?t.touches[0]:t).screenY)&&0===o.scrollTop,s=s<=n&&o.scrollHeight-o.scrollTop===e,!i&&!s)||t.preventDefault()}onWheel(t){Bt(t.composedPath()[0])||t.preventDefault()}cleanup(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var t=this.viewport;t&&(t.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1),window.removeEventListener("wheel",this.onWheel,{passive:!1})}attach(){this.fancybox.on("initLayout",this.onReady)}detach(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}},Thumbs:Jt,Html:ee,Toolbar:ne,Image:ie,Hash:I};const oe={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},ae=new Map;let re=0;class O extends Vt{constructor(t,e={}){t=t.map(t=>(t.width&&(t._width=t.width),t.height&&(t._height=t.height),t)),super(P(!0,{},oe,e)),this.bindHandlers(),this.state="init",this.setItems(t),this.attachPlugins(O.Plugins),this.trigger("init"),!0===this.option("hideScrollbar")&&this.hideScrollbar(),this.initLayout(),this.initCarousel(),this.attachEvents(),ae.set(this.id,this),this.trigger("prepare"),this.state="ready",this.trigger("ready"),this.$container.setAttribute("aria-hidden","false"),this.option("trapFocus")&&this.focus()}option(t,...e){var i=this.getSlide();let s=i?i[t]:void 0;return void 0!==s?s="function"==typeof s?s.call(this,this,...e):s:super.option(t,...e)}bindHandlers(){for(const t of["onMousedown","onKeydown","onClick","onFocus","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onTransform"])this[t]=this[t].bind(this)}attachEvents(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown,!0),this.option("trapFocus")&&document.addEventListener("focus",this.onFocus,!0),this.$container.addEventListener("click",this.onClick)}detachEvents(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown,!0),document.removeEventListener("focus",this.onFocus,!0),this.$container.removeEventListener("click",this.onClick)}initLayout(){this.$root=this.option("parentEl")||document.body;var t=this.option("template.main"),t=(t&&(this.$root.insertAdjacentHTML("beforeend",this.localize(t)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=()=>(this.$container.scrollLeft=0,!1),Object.entries({class:"fancybox__container",role:"dialog",tabIndex:"-1","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(t=>this.$container.setAttribute(...t)),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),(this.$container.Fancybox=this).id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++re,this.$container.setAttribute("id","fancybox-"+this.id)),this.option("mainClass"));return t&&this.$container.classList.add(...t.split(" ")),document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}setItems(i){const s=[];for(const o of i){const i=o.$trigger;if(i){const s=i.dataset||{};o.src=s.src||i.getAttribute("href")||o.src,o.type=s.type||o.type,!o.src&&i instanceof HTMLImageElement&&(o.src=i.currentSrc||o.$trigger.src)}let t=o.$thumb;var n;t||(n=o.$trigger&&o.$trigger.origTarget,!(t=n?n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])"):t)&&o.$trigger&&(t=o.$trigger instanceof HTMLImageElement?o.$trigger:o.$trigger.querySelector("img:not([aria-hidden])"))),o.$thumb=t||null;let e=o.thumb;!e&&t&&(!(e=t.currentSrc||t.src)&&t.dataset&&(e=t.dataset.lazySrc||t.dataset.src)),e||"image"!==o.type||(e=o.src),o.thumb=e||null,o.caption=o.caption||"",s.push(o)}this.items=s}initCarousel(){return this.Carousel=new Yt(this.$carousel,P(!0,{},{prefix:"",classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:()=>this.Carousel&&this.Carousel.pages&&this.Carousel.pages.length<2&&!this.option("dragToClose"),lockAxis:()=>{if(this.Carousel){let t="x";return this.option("dragToClose")&&(t+="y"),t}}},on:{"*":(t,...e)=>this.trigger("Carousel."+t,...e),init:t=>this.Carousel=t,createSlide:this.onCreateSlide,settle:this.onSettle}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}onCreateSlide(t,e){let i=e.caption||"";if("string"==typeof(i="function"==typeof this.options.caption?this.options.caption.call(this,this,this.Carousel,e):i)&&i.length){const t=document.createElement("div"),s=`fancybox__caption_${this.id}_`+e.index;t.className="fancybox__caption",t.innerHTML=i,t.setAttribute("id",s),e.$caption=e.$el.appendChild(t),e.$el.classList.add("has-caption"),e.$el.setAttribute("aria-labelledby",s)}}onSettle(){this.option("autoFocus")&&this.focus()}onFocus(t){this.isTopmost()&&this.focus(t)}onClick(t){if(!t.defaultPrevented){var e=t.composedPath()[0];if(e.matches("[data-fancybox-close]"))t.preventDefault(),O.close(!1,t);else if(e.matches("[data-fancybox-next]"))t.preventDefault(),O.next();else if(e.matches("[data-fancybox-prev]"))t.preventDefault(),O.prev();else{var i=document.activeElement;if(i){if(i.closest("[contenteditable]"))return;e.matches(Zt)||i.blur()}if(!e.closest(".fancybox__content")&&!getSelection().toString().length&&!1!==this.trigger("click",t))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}}}onTouchMove(){var t=this.getSlide().Panzoom;return!t||1===t.content.scale}onTouchEnd(t){var e=t.dragOffset.y;150<=Math.abs(e)||35<=Math.abs(e)&&t.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut"+(t.content.y<0?"Up":"Down")),this.close()):"y"===t.lockAxis&&t.panTo({y:0})}onTransform(t){var e;this.$backdrop&&(e=(e=Math.abs(t.content.y))<1?"":Math.max(.33,Math.min(1,1-e/t.content.fitHeight*1.5)),this.$container.style.setProperty("--fancybox-ts",e?"0s":""),this.$container.style.setProperty("--fancybox-opacity",e))}onMousedown(){"ready"===this.state&&document.body.classList.add("is-using-mouse")}onKeydown(t){var e,i,s,n;this.isTopmost()&&(document.body.classList.remove("is-using-mouse"),e=t.key,!(i=this.option("keyboard"))||t.ctrlKey||t.altKey||t.shiftKey||(s=t.composedPath()[0],n=(n=document.activeElement&&document.activeElement.classList)&&n.contains("carousel__button"),("Escape"===e||n||!t.target.isContentEditable&&-1===["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName))&&!1!==this.trigger("keydown",e,t)&&"function"==typeof this[n=i[e]]&&this[n]()))}getSlide(){var t,e=this.Carousel;return e&&(t=null===e.page?e.option("initialPage"):e.page,(e=e.pages||[]).length&&e[t])?e[t].slides[0]:null}focus(i){if(!(O.ignoreFocusChange||-1<["init","closing","customClosing","destroy"].indexOf(this.state))){const n=this.$container,o=this.getSlide(),a="done"===o.state?o.$el:null;if(!a||!a.contains(document.activeElement)){i&&i.preventDefault(),O.ignoreFocusChange=!0;const r=Array.from(n.querySelectorAll(Zt));let t,e=[];for(var s of r){const n=s.offsetParent,o=a&&a.contains(s),r=!this.Carousel.$viewport.contains(s);n&&(o||r)?(e.push(s),void 0!==s.dataset.origTabindex&&(s.tabIndex=s.dataset.origTabindex,s.removeAttribute("data-orig-tabindex")),(s.hasAttribute("autoFocus")||!t&&o&&!s.classList.contains("carousel__button"))&&(t=s)):(s.dataset.origTabindex=void 0===s.dataset.origTabindex?s.getAttribute("tabindex"):s.dataset.origTabindex,s.tabIndex=-1)}i?-1<e.indexOf(i.target)?this.lastFocus=i.target:this.lastFocus===n?Kt(e[e.length-1]):Kt(n):this.option("autoFocus")&&t?Kt(t):e.indexOf(document.activeElement)<0&&Kt(n),this.lastFocus=document.activeElement,O.ignoreFocusChange=!1}}}hideScrollbar(){var t,e,i;Xt&&(t=window.innerWidth-document.documentElement.getBoundingClientRect().width,e="fancybox-style-noscroll",(i=document.getElementById(e))||0<t&&((i=document.createElement("style")).id=e,i.type="text/css",i.innerHTML=`.compensate-for-scrollbar {padding-right: ${t}px;}`,document.getElementsByTagName("head")[0].appendChild(i),document.body.classList.add("compensate-for-scrollbar")))}revealScrollbar(){document.body.classList.remove("compensate-for-scrollbar");var t=document.getElementById("fancybox-style-noscroll");t&&t.remove()}clearContent(t){this.Carousel.trigger("removeSlide",t),t.$content&&(t.$content.remove(),t.$content=null),t.$closeButton&&(t.$closeButton.remove(),t.$closeButton=null),t._className&&t.$el.classList.remove(t._className)}setContent(t,e,i={}){let s;var n=t.$el;if(e instanceof HTMLElement)-1<["img","iframe","video","audio"].indexOf(e.nodeName.toLowerCase())?(s=document.createElement("div")).appendChild(e):s=e;else{const t=document.createRange().createContextualFragment(e);(s=document.createElement("div")).appendChild(t)}if((s=t.filter&&!t.error?s.querySelector(t.filter):s)instanceof Element)return t._className="has-"+(i.suffix||t.type||"unknown"),n.classList.add(t._className),s.classList.add("fancybox__content"),"none"!==s.style.display&&"none"!==getComputedStyle(s).getPropertyValue("display")||(s.style.display=t.display||this.option("defaultDisplay")||"flex"),t.id&&s.setAttribute("id",t.id),t.$content=s,n.prepend(s),this.manageCloseButton(t),"loading"!==t.state&&this.revealContent(t),s;this.setError(t,"{{ELEMENT_NOT_FOUND}}")}manageCloseButton(t){var e,i=void 0===t.closeButton?this.option("closeButton"):t.closeButton;!i||"top"===i&&this.$closeButton||((e=document.createElement("button")).classList.add("carousel__button","is-close"),e.setAttribute("title",this.options.l10n.CLOSE),e.innerHTML=this.option("template.closeButton"),e.addEventListener("click",t=>this.close(t)),"inside"===i?(t.$closeButton&&t.$closeButton.remove(),t.$closeButton=t.$content.appendChild(e)):this.$closeButton=this.$container.insertBefore(e,this.$container.firstChild))}revealContent(t){this.trigger("reveal",t),t.$content.style.visibility="";let e=!1;(e=t.error||"loading"===t.state||null!==this.Carousel.prevPage||t.index!==this.options.startIndex?e:void 0===t.showClass?this.option("showClass"):t.showClass)?(t.state="animating",this.animateCSS(t.$content,e,()=>{this.done(t)})):this.done(t)}animateCSS(e,i,s){if(e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),e&&i){const n=function(t){t.currentTarget===this&&(e.removeEventListener("animationend",n),s&&s(),e.classList.remove(i))};e.addEventListener("animationend",n),e.classList.add(i)}else"function"==typeof s&&s()}done(t){t.state="done",this.trigger("done",t);var e=this.getSlide();e&&t.index===e.index&&this.option("autoFocus")&&this.focus()}setError(t,e){t.error=e,this.hideLoading(t),this.clearContent(t);var i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,i,{suffix:"error"})}showLoading(t){t.state="loading",t.$el.classList.add("is-loading");var e=t.$el.querySelector(".fancybox__spinner");e||((e=document.createElement("div")).classList.add("fancybox__spinner"),e.innerHTML=this.option("template.spinner"),e.addEventListener("click",()=>{this.Carousel.Panzoom.velocity||this.close()}),t.$el.prepend(e))}hideLoading(t){var e=t.$el&&t.$el.querySelector(".fancybox__spinner");e&&(e.remove(),t.$el.classList.remove("is-loading")),"loading"===t.state&&(this.trigger("load",t),t.state="ready")}next(){var t=this.Carousel;t&&1<t.pages.length&&t.slideNext()}prev(){var t=this.Carousel;t&&1<t.pages.length&&t.slidePrev()}jumpTo(...t){this.Carousel&&this.Carousel.slideTo(...t)}isClosing(){return["closing","customClosing","destroy"].includes(this.state)}isTopmost(){return O.getInstance().id==this.id}close(t){if(t&&t.preventDefault(),!this.isClosing()&&!1!==this.trigger("shouldClose",t)&&(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",t),"destroy"!==this.state)){this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing");const e=this.getSlide();if(this.Carousel.slides.forEach(t=>{t.$content&&t.index!==e.index&&this.Carousel.trigger("removeSlide",t)}),"closing"===this.state){const t=void 0===e.hideClass?this.option("hideClass"):e.hideClass;this.animateCSS(e.$content,t,()=>{this.destroy()},!0)}}}destroy(){var t;"destroy"!==this.state&&(this.state="destroy",this.trigger("destroy"),t=this.option("placeFocusBack")?this.option("triggerTarget",this.getSlide().$trigger):null,this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,t&&Kt(t),ae.delete(this.id),(t=O.getInstance())?t.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar()))}static show(t,e={}){return new O(t,e)}static fromEvent(o,a={}){if(!o.defaultPrevented&&!(o.button&&0!==o.button||o.ctrlKey||o.metaKey||o.shiftKey)){const r=o.composedPath()[0];let t,i,s,n=r;if((n.matches("[data-fancybox-trigger]")||(n=n.closest("[data-fancybox-trigger]")))&&(a.triggerTarget=n,t=n&&n.dataset&&n.dataset.fancyboxTrigger),t){const o=document.querySelectorAll(`[data-fancybox="${t}"]`),a=parseInt(n.dataset.fancyboxIndex,10)||0;n=o.length?o[a]:n}Array.from(O.openers.keys()).reverse().some(t=>{s=n||r;let e=!1;try{s instanceof Element&&("string"==typeof t||t instanceof String)&&(e=s.matches(t)||(s=s.closest(t)))}catch(t){}return!!e&&(o.preventDefault(),i=t,!0)});let e=!1;if(i){a.event=o,(a.target=s).origTarget=r,e=O.fromOpener(i,a);const t=O.getInstance();t&&"ready"===t.state&&o.detail&&document.body.classList.add("is-using-mouse")}return e}}static fromOpener(t,e={}){let i=[],s=e.startIndex||0,n=e.target||null;const o=void 0!==(e=P({},e,O.openers.get(t))).groupAll&&e.groupAll,a=void 0===e.groupAttr?"data-fancybox":e.groupAttr,r=a&&n?n.getAttribute(""+a):"";if(!n||r||o){const P=e.root||(n?n.getRootNode():document.body);i=[].slice.call(P.querySelectorAll(t))}return!!(i=n&&!o?r?i.filter(t=>t.getAttribute(""+a)===r):[n]:i).length&&(!((t=O.getInstance())&&-1<i.indexOf(t.options.$trigger))&&(s=n?i.indexOf(n):s,i=i.map(function(t){var e,i,s=["false","0","no","null","undefined"],n=["true","1","yes"],o=Object.assign({},t.dataset),a={};for([e,i]of Object.entries(o))if("fancybox"!==e)if("width"===e||"height"===e)a["_"+e]=i;else if("string"==typeof i||i instanceof String)if(-1<s.indexOf(i))a[e]=!1;else if(-1<n.indexOf(a[e]))a[e]=!0;else try{a[e]=JSON.parse(i)}catch(s){a[e]=i}else a[e]=i;return t instanceof Element&&(a.$trigger=t),a}),new O(i,P({},e,{startIndex:s,$trigger:n}))))}static bind(t,e={}){function i(){document.body.addEventListener("click",O.fromEvent,!1)}Xt&&(O.openers.size||(/complete|interactive|loaded/.test(document.readyState)?i():document.addEventListener("DOMContentLoaded",i)),O.openers.set(t,e))}static unbind(t){O.openers.delete(t),O.openers.size||O.destroy()}static destroy(){for(var t;t=O.getInstance();)t.destroy();O.openers=new Map,document.body.removeEventListener("click",O.fromEvent,!1)}static getInstance(t){return t?ae.get(t):Array.from(ae.values()).reverse().find(t=>!t.isClosing()&&t)||null}static close(t=!0,e){if(t)for(const t of ae.values())t.close(e);else{const t=O.getInstance();t&&t.close(e)}}static next(){var t=O.getInstance();t&&t.next()}static prev(){var t=O.getInstance();t&&t.prev()}}O.version="4.0.31",O.defaults=oe,O.openers=new Map,O.Plugins=t,O.bind("[data-fancybox]");for(const[L,P]of Object.entries(O.Plugins||{}))"function"==typeof P.create&&P.create(O);O.bind("[data-fancybox]",{})}()}();